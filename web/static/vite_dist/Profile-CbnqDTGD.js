import{a as S}from"./acl-BtcXS2wX.js";import{_ as f,L as ft,G as j,r as ct,a7 as ut,t as Ct,U as X,a8 as Mt,l as Bt,R as gt,a9 as Z,aa as tt,e as Lt,a4 as At,ab as It,ac as Nt,ad as yt,q as vt}from"./icons-BAjd3tML.js";import{_ as L}from"./CardPage-Cth3uewv.js";import{S as P,u as Q,ab as G,f as et,g as O,a5 as $t,ac as _t,M as st,c as Ht,L as V}from"./layout-CUzOT8aY.js";import{c as q,e as B,a as kt,q as nt,Q as at,b as Ot,u as Vt,f as Ft}from"./useStationQuery-ClAZEJp_.js";import{d as E,j as H,c as r,o as l,a as e,b as i,i as m,t as s,u as t,e as b,F as w,q as U,m as k,D as Y,f as y,g as F,l as lt,s as xt,n as ot,$ as Qt,a6 as W,w as pt,r as mt,E as Wt}from"./vue-BsfewpWM.js";import{_ as zt}from"./Loading-CQdAiB8R.js";import{_ as J}from"./PlayButton-Dbj4ENWk.js";import{n as jt,u as Jt}from"./useNowPlaying-M_Wycmtp.js";import{a as Kt}from"./lightbox-B9nVyWr-.js";import{u as Gt,r as Yt}from"./regle-hGsoY2W9.js";import{_ as bt}from"./FormGroupField-K9S4Sadl.js";import{u as St,_ as Pt}from"./useHasModal-Bq3QxExQ.js";import{I as Xt}from"./InvisibleSubmitButton-NGv_v7G8.js";import{_ as Zt}from"./InfoCard-D5Q671bF.js";import{u as te}from"./useResettableRef-BwkDrsai.js";import{u as ee}from"./useStationDateTimeFormatter-CkmvkIuo.js";import{u as se}from"./luxon-m3VuE4xT.js";import{_ as it}from"./EnabledBadge-BJcmite3.js";import{s as ne}from"./set-DDmyyuD3.js";import{_ as K}from"./CopyToClipboardButton-DQd5D5nJ.js";import{_ as ht}from"./FormGroupMultiCheck-z3kTFzdV.js";import{_ as wt}from"./RunningBadge-BHzAwYQE.js";import"./leaflet-DkUWBo0d.js";import"./estoolkit-DCzBkaPJ.js";import"./hlsjs-BVyhFw5s.js";import"./bootstrap.esm-30QIU_ZL.js";import"./vue-router-Cafqdr3I.js";import"./getSymbolsIn-Bpzy0hqO.js";import"./isTypedArray-By1PpNM0.js";import"./isArrayLike-DknTMkCU.js";import"./iteratee-DJRL6CbS.js";import"./zxcvbn-Bgw4VUEj.js";import"./FormGroup-DXDHSoyc.js";import"./ValidationError-DsAp6Fjg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./luxon-F75Z0klY.js";import"./FormMultiCheck-RiRcopXY.js";import"./map-Caxea7Kw.js";import"./useSlotsExcept-Dp0PSXNw.js";const ae={class:"outside-card-header d-flex align-items-center"},le={class:"flex-fill"},oe={class:"display-6 m-0"},ie={key:0,class:"flex-shrink-0 ms-3"},re={class:"card-body"},de={class:"card-text"},ce=E({__name:"StationDisabledPanel",setup(g){const o=q();return(a,c)=>{const d=H("router-link");return l(),r(w,null,[e("div",ae,[e("div",le,[e("h2",oe,s(t(o).name),1)]),t(S)(t(P).Profile)?(l(),r("div",ie,[i(d,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:b(()=>[i(f,{icon:t(ft)},null,8,["icon"]),e("span",null,s(a.$gettext("Edit Profile")),1)]),_:1})])):m("",!0)]),i(L,{id:"station-disabled",title:a.$gettext("Station Disabled")},{default:b(()=>[e("div",re,[e("p",de,s(a.$gettext("Your station is currently not enabled for broadcasting. You can still manage media, playlists, and other station settings. To re-enable broadcasting, edit your station profile.")),1)])]),_:1},8,["title"])],64)}}}),Dt={nowPlayingProps:{stationShortName:"",useStatic:!1,useSse:!1},publicPageUri:"",publicPageEmbedUri:"",publicWebDjUri:"",publicOnDemandUri:"",publicPodcastsUri:"",publicScheduleUri:"",publicOnDemandEmbedUri:"",publicRequestEmbedUri:"",publicHistoryEmbedUri:"",publicScheduleEmbedUri:"",publicPodcastsEmbedUri:"",frontendAdminUri:"",frontendAdminPassword:"",frontendSourcePassword:"",frontendRelayPassword:"",frontendPort:null,numSongs:0,numPlaylists:0},Ut=()=>{const{axios:g}=Q(),o=B("/vue/profile"),a=q(),{isEnabled:c}=G(a);return kt({queryKey:nt([at.StationProfile,"props"]),queryFn:async({signal:d})=>{const{data:_}=await g.get(o.value,{signal:d});return _},placeholderData:()=>Dt,enabled:c})},Rt={station:{...jt.station},services:{backendRunning:!1,frontendRunning:!1},schedule:[]},Et=()=>{const{axiosSilent:g}=Q(),o=B("/profile"),a=q(),{isEnabled:c}=G(a);return kt({queryKey:nt([at.StationProfile,"profile"]),queryFn:async({signal:d})=>{const{data:_}=await g.get(o.value,{signal:d});return _},placeholderData:()=>Rt,refetchInterval:15*1e3,enabled:c})},N=()=>{const{data:g}=Ut(),{data:o}=Et();return U(()=>{const a=g.value??Dt,c=o.value??Rt;return{...a,...c}})},Tt=()=>{const g=Ot(),o=Vt();return async()=>{await g.invalidateQueries({queryKey:nt([at.StationProfile],o)})}},ue={class:"table table-striped table-responsive mb-0"},_e={colspan:"2"},pe={class:"text-end"},me={class:"pe-1"},be={class:"ps-1"},he={class:"mb-1"},fe=["href"],ge={class:"ps-1 text-end"},ye={class:"listeners-total ps-1"},ve={class:"listeners-unique pe-1"},$e={colspan:"2"},ke={class:"text-end"},xe={class:"pe-1"},Se={class:"ps-1"},Pe={class:"mb-1"},we=["href"],De={class:"ps-1 text-end"},Ue={class:"listeners-total ps-1"},Re={class:"listeners-unique pe-1"},Ee={colspan:"2"},Te={class:"text-end"},qe={class:"align-middle"},Ce={class:"pe-1"},Me={class:"ps-1"},Be=["href"],Le={class:"ps-1 text-end"},Ae={class:"listeners-total ps-1"},Ie=["href"],Ne=["href"],He=E({__name:"StreamsPanel",setup(g){const o=N();return(a,c)=>(l(),k(L,{"header-id":"hdr_streams",title:a.$gettext("Streams")},{footer_actions:b(()=>[e("a",{class:"btn btn-link text-primary",href:t(o).station.playlist_pls_url},[i(f,{icon:t(ct)},null,8,["icon"]),e("span",null,s(a.$gettext("Download PLS")),1)],8,Ie),e("a",{class:"btn btn-link text-primary",href:t(o).station.playlist_m3u_url},[i(f,{icon:t(ct)},null,8,["icon"]),e("span",null,s(a.$gettext("Download M3U")),1)],8,Ne)]),default:b(()=>[e("table",ue,[c[2]||(c[2]=e("colgroup",null,[e("col",{style:{width:"2%"}}),e("col",{style:{width:"78%"}}),e("col",{style:{width:"20%"}})],-1)),t(o).station.mounts.length>0?(l(),r(w,{key:0},[e("thead",null,[e("tr",null,[e("th",_e,s(a.$gettext("Local Streams")),1),e("th",pe,s(a.$gettext("Listeners")),1)])]),e("tbody",null,[(l(!0),r(w,null,Y(t(o).station.mounts,d=>(l(),r("tr",{key:d.id,class:"align-middle"},[e("td",me,[i(J,{class:"btn-lg",stream:{url:d.url,title:d.name,isStream:!0}},null,8,["stream"])]),e("td",be,[e("h6",he,s(d.name),1),e("a",{href:d.url,target:"_blank"},s(d.url),9,fe)]),e("td",ge,[i(f,{class:"sm align-middle",icon:t(j)},null,8,["icon"]),e("span",ye,s(d.listeners.total),1),c[0]||(c[0]=e("br",null,null,-1)),e("small",null,[e("span",ve,s(d.listeners.unique),1),y(" "+s(a.$gettext("Unique")),1)])])]))),128))])],64)):m("",!0),t(o).station.remotes.length>0?(l(),r(w,{key:1},[e("thead",null,[e("tr",null,[e("th",$e,s(a.$gettext("Remote Relays")),1),e("th",ke,s(a.$gettext("Listeners")),1)])]),e("tbody",null,[(l(!0),r(w,null,Y(t(o).station.remotes,d=>(l(),r("tr",{key:d.id,class:"align-middle"},[e("td",xe,[i(J,{class:"btn-lg",stream:{url:d.url,title:d.name,isStream:!0}},null,8,["stream"])]),e("td",Se,[e("h6",Pe,s(d.name),1),e("a",{href:d.url,target:"_blank"},s(d.url),9,we)]),e("td",De,[i(f,{class:"sm align-middle",icon:t(j)},null,8,["icon"]),e("span",Ue,s(d.listeners.total),1),c[1]||(c[1]=e("br",null,null,-1)),e("small",null,[e("span",Re,s(d.listeners.unique),1),y(" "+s(a.$gettext("Unique")),1)])])]))),128))])],64)):m("",!0),t(o).station.hls_enabled?(l(),r(w,{key:2},[e("thead",null,[e("tr",null,[e("th",Ee,s(a.$gettext("HTTP Live Streaming (HLS)")),1),e("th",Te,s(a.$gettext("Listeners")),1)])]),e("tbody",null,[e("tr",qe,[e("td",Ce,[i(J,{class:"btn-lg",stream:{url:t(o).station.hls_url,title:a.$gettext("HLS"),isStream:!0,isHls:!0}},null,8,["stream"])]),e("td",Me,[t(o).station.hls_url?(l(),r("a",{key:0,href:t(o).station.hls_url,target:"_blank"},s(t(o).station.hls_url),9,Be)):m("",!0)]),e("td",Le,[i(f,{class:"sm align-middle",icon:t(j)},null,8,["icon"]),e("span",Ae,s(t(o).station.hls_listeners)+" "+s(a.$gettext("Unique")),1)])])])],64)):m("",!0)])]),_:1},8,["title"]))}}),Oe={class:"outside-card-header d-flex align-items-center"},Ve={key:0,class:"flex-shrink-0 me-2"},Fe={class:"flex-fill"},Qe={class:"display-6 m-0"},We={key:0,class:"text-muted"},ze={key:1,class:"flex-shrink-0 ms-3"},je=E({__name:"HeaderPanel",setup(g){const o=q(),a=N();return(c,d)=>{const _=H("router-link");return l(),r("div",Oe,[t(a).station.listen_url&&t(o).hasStarted?(l(),r("div",Ve,[i(J,{class:"btn-xl",stream:{url:t(a).station.listen_url,title:t(o).name,isStream:!0}},null,8,["stream"])])):m("",!0),e("div",Fe,[e("h2",Qe,[y(s(t(o).name),1),d[0]||(d[0]=e("br",null,null,-1)),t(o).description?(l(),r("small",We,s(t(o).description),1)):m("",!0)])]),t(S)(t(P).Profile)?(l(),r("div",ze,[i(_,{class:"btn btn-primary",role:"button",to:{name:"stations:profile:edit"}},{default:b(()=>[i(f,{icon:t(ft)},null,8,["icon"]),e("span",null,s(c.$gettext("Edit Profile")),1)]),_:1})])):m("",!0)])}}}),Je={class:"row g-3"},Ke=E({__name:"UpdateMetadataModal",setup(g,{expose:o}){const a=B("/nowplaying/update"),{record:c,reset:d}=te({title:"",artist:""}),{r$:_}=Gt(c,{title:{required:Yt},artist:{}},{}),n=F("$modal"),{hide:u,show:D}=St(n),p=()=>{d(),_.$reset()},v=F("$field"),R=()=>{ot(()=>{v.value?.focus()})},{notifySuccess:T}=et(),{axios:C}=Q(),{$gettext:$}=O(),h=async()=>{const{valid:x}=await _.$validate();if(x)try{await C.post(a.value,c.value),T($("Metadata updated."))}finally{u()}};return o({open:D}),(x,A)=>(l(),k(Pt,{id:"update_metadata",ref_key:"$modal",ref:n,centered:"",title:t($)("Update Metadata"),onHidden:p,onShown:R},{"modal-footer":b(()=>[e("button",{type:"button",class:"btn btn-secondary",onClick:A[0]||(A[0]=(...dt)=>t(u)&&t(u)(...dt))},s(t($)("Close")),1),e("button",{type:"button",class:xt(["btn",t(_).$invalid?"btn-danger":"btn-primary"]),onClick:h},s(t($)("Update Metadata")),3)]),default:b(()=>[i(Zt,null,{default:b(()=>[y(s(t($)("Use this form to send a manual metadata update. Note that this will override any existing metadata on the stream.")),1)]),_:1}),e("form",{onSubmit:lt(h,["prevent"])},[e("div",Je,[i(bt,{id:"update_metadata_title",ref_key:"$field",ref:v,class:"col-12",field:t(_).title,label:t($)("Title")},null,8,["field","label"]),i(bt,{id:"update_metadata_artist",class:"col-12",field:t(_).artist,label:t($)("Artist")},null,8,["field","label"])]),i(Xt)],32)]),_:1},8,["title"]))}});function I(g,o={}){const{axios:a}=Q(),{showAlert:c}=$t(),{notify:d}=et(),_=Tt();return async()=>{const{value:n}=await c(o);if(!n)return;const{data:u}=await a.post(Qt(g));d(u.formatted_message,{variant:u.success?_t.Success:_t.Warning}),await ot(),await _()}}const Ge={class:"d-flex align-items-center"},Ye=["id"],Xe={class:"card-subtitle text-end flex-fill my-0",style:{"line-height":"1"}},Ze={class:"ps-1"},ts={class:"pe-1"},es={class:"card-body"},ss={class:"row"},ns={class:"col-md-6"},as={class:"clearfix"},ls={class:"d-table"},os={class:"d-table-row"},is={class:"d-table-cell align-middle text-end pe-2 pb-2"},rs={class:"d-table-cell align-middle w-100 pb-2"},ds={class:"m-0"},cs={class:"d-table-row"},us={class:"d-table-cell align-top text-end pe-2"},_s=["href"],ps=["src"],ms={class:"d-table-cell align-middle w-100"},bs={key:0},hs={class:"media-heading m-0 text-muted"},fs={key:1},gs={class:"media-heading m-0",style:{"line-height":"1.2"}},ys={class:"text-muted"},vs={key:2},$s={class:"media-heading m-0",style:{"line-height":"1.2"}},ks={key:3},xs={class:"text-muted"},Ss={key:4,class:"nowplaying-progress"},Ps={class:"col-md-6 mt-3 mt-md-0"},ws={key:0,class:"clearfix"},Ds={class:"d-table"},Us={class:"d-table-row"},Rs={class:"d-table-cell align-middle pe-2 text-end pb-2"},Es={class:"d-table-cell align-middle w-100 pb-2"},Ts={class:"m-0"},qs={class:"d-table-row"},Cs={class:"d-table-cell align-top text-end pe-2"},Ms=["href"],Bs=["src"],Ls={class:"d-table-cell align-middle w-100"},As={key:0},Is={class:"media-heading m-0",style:{"line-height":"1"}},Ns={class:"text-muted"},Hs={key:1},Os={class:"media-heading m-0",style:{"line-height":"1"}},Vs={key:2},Fs={class:"text-muted"},Qs={key:1,class:"clearfix"},Ws={style:{"margin-left":"22px"}},zs={class:"media-heading",style:{"margin-left":"22px"}},js=E({__name:"NowPlayingPanel",setup(g){const o=q(),a=N(),{nowPlayingProps:c}=G(a),d=B("/backend/skip"),_=B("/backend/disconnect"),{np:n,currentTrackDurationDisplay:u,currentTrackElapsedDisplay:D}=Jt(c),{$gettext:p,$ngettext:v}=O(),R=U(()=>v("%{listeners} Listener","%{listeners} Listeners",n.value?.listeners?.total??0,{listeners:String(n.value?.listeners?.total??0)})),T=U(()=>o.value.backendType===st.Liquidsoap),{vLightbox:C}=Kt(),$=I(d,{title:p("Skip current song?"),confirmButtonText:p("Skip Song")}),h=I(_,{title:p("Disconnect current streamer?"),confirmButtonText:p("Disconnect Streamer")}),x=F("$updateMetadataModal"),A=()=>{x.value?.open()};return(dt,M)=>{const qt=H("router-link");return l(),r(w,null,[i(L,{id:"profile-nowplaying",class:"nowplaying","header-id":"hdr_now_playing"},W({header:b(({id:z})=>[e("div",Ge,[e("h3",{id:z,class:"flex-shrink card-title my-0"},s(t(p)("On the Air")),9,Ye),e("h6",Xe,[i(f,{class:"align-middle",icon:t(j)},null,8,["icon"]),e("span",Ze,s(R.value),1),M[3]||(M[3]=e("br",null,null,-1)),e("small",null,[e("span",ts,s(t(n).listeners?.unique??0),1),y(" "+s(t(p)("Unique")),1)])]),t(S)(t(P).Reports)?(l(),k(qt,{key:0,class:"flex-shrink btn btn-link text-white ms-2 px-1 py-2",to:{name:"stations:reports:listeners"},title:t(p)("Listener Report")},{default:b(()=>[i(f,{icon:t(gt)},null,8,["icon"])]),_:1},8,["title"])):m("",!0)])]),default:b(()=>[e("div",es,[e("div",ss,[e("div",ns,[e("div",as,[e("div",ls,[e("div",os,[e("div",is,[i(f,{icon:t(Mt)},null,8,["icon"])]),e("div",rs,[e("h5",ds,s(t(p)("Now Playing")),1)])]),e("div",cs,[e("div",us,[t(n).now_playing?.song?.art?pt((l(),r("a",{key:0,href:t(n).now_playing.song.art,target:"_blank"},[e("img",{class:"rounded",src:t(n).now_playing.song.art,alt:"Album Art",style:{width:"50px"}},null,8,ps)],8,_s)),[[t(C)]]):m("",!0)]),e("div",ms,[t(n).is_online?t(n).now_playing?.song?.title?(l(),r("div",fs,[e("h6",gs,[y(s(t(n).now_playing.song.title),1),M[4]||(M[4]=e("br",null,null,-1)),e("small",ys,s(t(n).now_playing.song.artist),1)])])):(l(),r("div",vs,[e("h6",$s,s(t(n).now_playing?.song?.text??""),1)])):(l(),r("div",bs,[e("h5",hs,s(t(o).offlineText??t(p)("Station Offline")),1)])),t(n).now_playing?.playlist?(l(),r("div",ks,[e("small",xs,s(t(p)("Playlist"))+" : "+s(t(n).now_playing.playlist),1)])):m("",!0),t(D)?(l(),r("div",Ss,[e("small",null,s(t(D))+" / "+s(t(u)),1)])):m("",!0)])])])])]),e("div",Ps,[!t(n).live?.is_live&&t(n).playing_next?(l(),r("div",ws,[e("div",Ds,[e("div",Us,[e("div",Rs,[i(f,{icon:t(ut)},null,8,["icon"])]),e("div",Es,[e("h5",Ts,s(t(p)("Playing Next")),1)])]),e("div",qs,[e("div",Cs,[t(n).playing_next?.song?.art?pt((l(),r("a",{key:0,href:t(n).playing_next.song.art,target:"_blank"},[e("img",{src:t(n).playing_next.song.art,class:"rounded",alt:"Album Art",style:{width:"40px"}},null,8,Bs)],8,Ms)),[[t(C)]]):m("",!0)]),e("div",Ls,[t(n).playing_next?.song?.title?(l(),r("div",As,[e("h6",Is,[y(s(t(n).playing_next.song.title),1),M[5]||(M[5]=e("br",null,null,-1)),e("small",Ns,s(t(n).playing_next.song.artist),1)])])):(l(),r("div",Hs,[e("h6",Os,s(t(n).playing_next?.song?.text??""),1)])),t(n).playing_next.playlist?(l(),r("div",Vs,[e("small",Fs,s(t(p)("Playlist"))+" : "+s(t(n).playing_next.playlist),1)])):m("",!0)])])])])):t(n).live?.is_live?(l(),r("div",Qs,[e("h6",Ws,[i(f,{icon:t(Bt)},null,8,["icon"]),y(" "+s(t(p)("Live")),1)]),e("h4",zs,s(t(n).live?.streamer_name),1)])):m("",!0)])])])]),_:2},[T.value&&t(S)(t(P).Broadcasting)?{name:"footer_actions",fn:b(()=>[t(n).live?.is_live?m("",!0):(l(),r("button",{key:0,id:"btn_skip_song",type:"button",class:"btn btn-link text-primary",onClick:M[0]||(M[0]=z=>t($)())},[i(f,{icon:t(ut)},null,8,["icon"]),e("span",null,s(t(p)("Skip Song")),1)])),t(n).live?.is_live?(l(),r("button",{key:1,id:"btn_disconnect_streamer",type:"button",class:"btn btn-link text-primary",onClick:M[1]||(M[1]=z=>t(h)())},[i(f,{icon:t(Ct)},null,8,["icon"]),e("span",null,s(t(p)("Disconnect Streamer")),1)])):m("",!0),e("button",{id:"btn_update_metadata",type:"button",class:"btn btn-link text-secondary",onClick:M[2]||(M[2]=z=>A())},[i(f,{icon:t(X)},null,8,["icon"]),e("span",null,s(t(p)("Update Metadata")),1)])]),key:"0"}:void 0]),1024),T.value&&t(S)(t(P).Broadcasting)?(l(),k(Ke,{key:0,ref_key:"$updateMetadataModal",ref:x},null,512)):m("",!0)],64)}}}),Js={class:"table table-striped mb-0"},Ks={class:"d-flex w-100 justify-content-between align-items-center"},Gs={class:"m-0"},Ys={class:"text-end m-0"},Xs=E({__name:"SchedulePanel",setup(g){const o=N(),{schedule:a}=G(o),{DateTime:c}=se(),{now:d,timestampToDateTime:_,formatDateTime:n}=ee(),u=U(()=>{const D=d();return a.value.map(p=>{const v=_(p.start_timestamp),R=_(p.end_timestamp);return{...p,time_until:v.toRelative({round:!1})??"N/A",start_formatted:n(v,v.hasSame(D,"day")?c.TIME_SIMPLE:c.DATETIME_MED),end_formatted:n(R,R.hasSame(v,"day")?c.TIME_SIMPLE:c.DATETIME_MED)}})});return(D,p)=>u.value.length>0?(l(),k(L,{key:0,class:"scheduled","header-id":"hdr_scheduled",title:D.$gettext("Scheduled")},{default:b(()=>[e("table",Js,[e("tbody",null,[(l(!0),r(w,null,Y(u.value,v=>(l(),r("tr",{key:v.id},[e("td",null,[e("div",Ks,[e("h5",Gs,[e("small",null,[v.type==="playlist"?(l(),r(w,{key:0},[y(s(D.$gettext("Playlist")),1)],64)):(l(),r(w,{key:1},[y(s(D.$gettext("Streamer/DJ")),1)],64))]),p[0]||(p[0]=e("br",null,null,-1)),y(" "+s(v.name),1)]),e("p",Ys,[e("small",null,s(v.start_formatted)+" - "+s(v.end_formatted),1),p[1]||(p[1]=e("br",null,null,-1)),e("strong",null,[v.is_now?(l(),r(w,{key:0},[y(s(D.$gettext("Now")),1)],64)):(l(),r(w,{key:1},[y(s(v.time_until),1)],64))])])])])]))),128))])])]),_:1},8,["title"])):m("",!0)}});function rt(g,o){const{axios:a}=Q(),{showAlert:c}=$t(),{notifySuccess:d}=et(),{$gettext:_}=O(),n=B("/profile/edit"),u=Ft(),D=Tt();return async()=>{const p=!o.value,{value:v}=await c({title:_(p?"Enable feature?":"Disable feature?"),confirmButtonText:_(p?"Enable":"Disable"),confirmButtonClass:p?"btn-success":"btn-danger"});if(!v)return;const R={};ne(R,g,p);const{data:T}=await a.put(n.value,R);d(T.message),await ot(),await Promise.all([u(),D()])}}const Zs=["id"],tn=E({__name:"RequestsPanel",setup(g){const o=q(),a=rt("enable_requests",U(()=>o.value.enableRequests));return(c,d)=>{const _=H("router-link");return l(),k(L,{"header-id":"hdr_song_requests"},W({header:b(({id:n})=>[e("h3",{id:n,class:"card-title"},[y(s(c.$gettext("Song Requests"))+" ",1),i(it,{enabled:t(o).enableRequests},null,8,["enabled"])],8,Zs)]),_:2},[t(S)(t(P).Broadcasting)||t(S)(t(P).Profile)?{name:"footer_actions",fn:b(()=>[t(o).enableRequests?(l(),r(w,{key:0},[t(S)(t(P).Broadcasting)?(l(),k(_,{key:0,class:"btn btn-link text-primary",to:{name:"stations:reports:requests"}},{default:b(()=>[i(f,{icon:t(gt)},null,8,["icon"]),e("span",null,s(c.$gettext("View")),1)]),_:1})):m("",!0),t(S)(t(P).Profile)?(l(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:d[0]||(d[0]=(...n)=>t(a)&&t(a)(...n))},[i(f,{icon:t(Z)},null,8,["icon"]),e("span",null,s(c.$gettext("Disable")),1)])):m("",!0)],64)):(l(),r(w,{key:1},[t(S)(t(P).Profile)?(l(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:d[1]||(d[1]=(...n)=>t(a)&&t(a)(...n))},[i(f,{icon:t(tt)},null,8,["icon"]),e("span",null,s(c.$gettext("Enable")),1)])):m("",!0)],64))]),key:"0"}:void 0]),1024)}}}),en=["id"],sn=E({__name:"StreamersPanel",setup(g){const o=q(),a=rt("enable_streamers",U(()=>o.value.enableStreamers));return(c,d)=>{const _=H("router-link");return l(),k(L,{"header-id":"hdr_streamers"},W({header:b(({id:n})=>[e("h3",{id:n,class:"card-title"},[y(s(c.$gettext("Streamers/DJs"))+" ",1),i(it,{enabled:t(o).enableStreamers},null,8,["enabled"])],8,en)]),_:2},[t(S)(t(P).Streamers)||t(S)(t(P).Profile)?{name:"footer_actions",fn:b(()=>[t(o).enableStreamers?(l(),r(w,{key:0},[t(S)(t(P).Streamers)?(l(),k(_,{key:0,class:"btn btn-link text-primary",to:{name:"stations:streamers:index"}},{default:b(()=>[i(f,{icon:t(Lt)},null,8,["icon"]),e("span",null,s(c.$gettext("Manage")),1)]),_:1})):m("",!0),t(S)(t(P).Profile)?(l(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:d[0]||(d[0]=(...n)=>t(a)&&t(a)(...n))},[i(f,{icon:t(Z)},null,8,["icon"]),e("span",null,s(c.$gettext("Disable")),1)])):m("",!0)],64)):(l(),r(w,{key:1},[t(S)(t(P).Profile)?(l(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:d[1]||(d[1]=(...n)=>t(a)&&t(a)(...n))},[i(f,{icon:t(tt)},null,8,["icon"]),e("span",null,s(c.$gettext("Enable")),1)])):m("",!0)],64))]),key:"0"}:void 0]),1024)}}}),nn={class:"row"},an={class:"col-md-7"},ln={class:"card mb-3",role:"region"},on={class:"card-header text-bg-primary"},rn={class:"card-title"},dn={class:"card-body"},cn={class:"row"},un={class:"col-md-6"},_n={class:"col-md-6"},pn={class:"col-md-5"},mn={class:"card mb-3",role:"region"},bn={class:"card-header text-bg-primary"},hn={class:"card-title"},fn={class:"card-body"},gn=["value"],yn=["data-bs-theme"],vn={class:"card-header text-bg-primary"},$n={class:"card-title"},kn={class:"card-body"},xn=["src"],Sn=E({__name:"EmbedModal",setup(g,{expose:o}){const a=q(),c=N(),d=mt("player"),_=mt("light"),{$gettext:n}=O(),u=U(()=>{const h=[{value:"player",text:n("Radio Player")},{value:"history",text:n("History")},{value:"podcasts",text:n("Podcasts")},{value:"schedule",text:n("Schedule")}];return a.value.features.requests&&a.value.enableRequests&&h.push({value:"requests",text:n("Requests")}),a.value.enableOnDemand&&h.push({value:"ondemand",text:n("On-Demand Media")}),h}),D=U(()=>[{value:"browser",text:n("Browser Default")},{value:"light",text:n("Light")},{value:"dark",text:n("Dark")}]),p=U(()=>{switch(d.value){case"history":return c.value.publicHistoryEmbedUri;case"ondemand":return c.value.publicOnDemandEmbedUri;case"requests":return c.value.publicRequestEmbedUri;case"schedule":return c.value.publicScheduleEmbedUri;case"podcasts":return c.value.publicPodcastsEmbedUri;case"player":default:return c.value.publicPageEmbedUri}}),v=U(()=>{const h=new URL(p.value);return _.value!=="browser"&&h.searchParams.set("theme",_.value),h.toString()}),R=U(()=>{switch(d.value){case"ondemand":case"podcasts":return"400px";case"requests":return"850px";case"history":return"300px";case"schedule":return"800px";case"player":default:return"150px"}}),T=U(()=>'<iframe src="'+v.value+'" frameborder="0" allowtransparency="true" style="width: 100%; min-height: '+R.value+'; border: 0;"></iframe>'),C=F("$modal"),{show:$}=St(C);return o({open:$}),(h,x)=>(l(),k(Pt,{id:"embed_modal",ref_key:"$modal",ref:C,size:"lg",title:t(n)("Embed Widgets"),"hide-footer":"","no-enforce-focus":""},{default:b(()=>[e("div",nn,[e("div",an,[e("section",ln,[e("div",on,[e("h2",rn,s(t(n)("Customize")),1)]),e("div",dn,[e("div",cn,[e("div",un,[i(ht,{id:"embed_type",modelValue:d.value,"onUpdate:modelValue":x[0]||(x[0]=A=>d.value=A),label:t(n)("Widget Type"),options:u.value,stacked:"",radio:""},null,8,["modelValue","label","options"])]),e("div",_n,[i(ht,{id:"embed_theme",modelValue:_.value,"onUpdate:modelValue":x[1]||(x[1]=A=>_.value=A),label:t(n)("Theme"),name:"embed_theme",options:D.value,stacked:"",radio:""},null,8,["modelValue","label","options"])])])])])]),e("div",pn,[e("section",mn,[e("div",bn,[e("h2",hn,s(t(n)("Embed Code")),1)]),e("div",fn,[e("textarea",{class:"full-width form-control text-preformatted",spellcheck:"false",style:{height:"100px"},readonly:"",value:T.value},null,8,gn),i(K,{text:T.value},null,8,["text"])])])])]),e("section",{class:"card mb-3",role:"region","data-bs-theme":_.value},[e("div",vn,[e("h2",$n,s(t(n)("Preview")),1)]),e("div",kn,[e("iframe",{width:"100%",src:v.value,frameborder:"0",style:Wt([{width:"100%",border:"0"},{"min-height":R.value}])},null,12,xn)])],8,yn)]),_:1},8,["title"]))}}),Pn=["id"],wn={key:0,class:"table table-striped table-responsive-md mb-0"},Dn=["href"],Un={key:0},Rn=["href"],En={key:1},Tn=["href"],qn=["href"],Cn=["href"],Mn=E({__name:"PublicPagesPanel",setup(g){const o=q(),a=N(),c=F("$embedModal"),d=()=>{c.value?.open()},_=rt("enable_public_page",U(()=>o.value.enablePublicPages));return(n,u)=>{const D=H("router-link");return l(),r(w,null,[i(L,{"header-id":"hdr_public_pages"},{header:b(({id:p})=>[e("h3",{id:p,class:"card-title"},[y(s(n.$gettext("Public Pages"))+" ",1),i(it,{enabled:t(o).enablePublicPages},null,8,["enabled"])],8,Pn)]),footer_actions:b(()=>[t(o).enablePublicPages?(l(),r(w,{key:0},[e("a",{class:"btn btn-link text-secondary",onClick:lt(d,["prevent"])},[i(f,{icon:t(At)},null,8,["icon"]),e("span",null,s(n.$gettext("Embed Widgets")),1)]),t(S)(t(P).Profile)?(l(),k(D,{key:0,class:"btn btn-link text-secondary",to:{name:"stations:branding"}},{default:b(()=>[i(f,{icon:t(It)},null,8,["icon"]),e("span",null,s(n.$gettext("Edit Branding")),1)]),_:1})):m("",!0),t(S)(t(P).Profile)?(l(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:u[0]||(u[0]=(...p)=>t(_)&&t(_)(...p))},[i(f,{icon:t(Z)},null,8,["icon"]),e("span",null,s(n.$gettext("Disable")),1)])):m("",!0)],64)):(l(),r(w,{key:1},[t(S)(t(P).Profile)?(l(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:u[1]||(u[1]=(...p)=>t(_)&&t(_)(...p))},[i(f,{icon:t(tt)},null,8,["icon"]),e("span",null,s(n.$gettext("Enable")),1)])):m("",!0)],64))]),default:b(()=>[t(o).enablePublicPages?(l(),r("table",wn,[u[2]||(u[2]=e("colgroup",null,[e("col",{style:{width:"30%"}}),e("col",{style:{width:"70%"}})],-1)),e("tbody",null,[e("tr",null,[e("td",null,s(n.$gettext("Public Page")),1),e("td",null,[e("a",{href:t(a).publicPageUri,target:"_blank"},s(t(a).publicPageUri),9,Dn)])]),t(o).features.streamers&&t(o).enableStreamers?(l(),r("tr",Un,[e("td",null,s(n.$gettext("Web DJ")),1),e("td",null,[e("a",{href:t(a).publicWebDjUri,target:"_blank"},s(t(a).publicWebDjUri),9,Rn)])])):m("",!0),t(o).enableOnDemand?(l(),r("tr",En,[e("td",null,s(n.$gettext("On-Demand Media")),1),e("td",null,[e("a",{href:t(a).publicOnDemandUri,target:"_blank"},s(t(a).publicOnDemandUri),9,Tn)])])):m("",!0),e("tr",null,[e("td",null,s(n.$gettext("Podcasts")),1),e("td",null,[e("a",{href:t(a).publicPodcastsUri,target:"_blank"},s(t(a).publicPodcastsUri),9,qn)])]),e("tr",null,[e("td",null,s(n.$gettext("Schedule")),1),e("td",null,[e("a",{href:t(a).publicScheduleUri,target:"_blank"},s(t(a).publicScheduleUri),9,Cn)])])])])):m("",!0)]),_:1}),i(Sn,{ref_key:"$embedModal",ref:c},null,512)],64)}}}),Bn=["id"],Ln={class:"table table-striped table-responsive"},An={class:"align-middle"},In=["href"],Nn={class:"px-0"},Hn={class:"text-monospace"},On={class:"px-0"},Vn={class:"align-middle"},Fn={class:"ps-0",colspan:"2"},Qn={key:0,class:"form-text"},Wn={class:"align-middle"},zn={class:"px-0"},jn={class:"text-monospace"},Jn={class:"px-0"},Kn={class:"align-middle"},Gn={class:"px-0"},Yn={class:"text-monospace"},Xn={class:"px-0"},Zn=E({__name:"FrontendPanel",setup(g){const o=q(),a=N(),c=B("/frontend/restart"),d=B("/frontend/start"),_=B("/frontend/stop"),n=Ht("station_show_frontend_credentials",!1),{$gettext:u}=O(),D=U(()=>n.value?u("Hide Credentials"):u("Show Credentials")),p=U(()=>{switch(o.value.frontendType){case V.Icecast:return"Icecast";case V.Rsas:return"Rocket Streaming Audio Server (RSAS)";case V.Shoutcast:return"Shoutcast";default:return""}}),v=U(()=>o.value.frontendType===V.Shoutcast),R=I(c,{title:u("Restart service?"),confirmButtonText:u("Restart")}),T=I(d,{title:u("Start service?"),confirmButtonText:u("Start"),confirmButtonClass:"btn-success"}),C=I(_,{title:u("Stop service?"),confirmButtonText:u("Stop"),confirmButtonClass:"btn-danger"});return($,h)=>(l(),k(L,{id:"profile-frontend",class:"mb-4","header-id":"hdr_frontend"},W({header:b(({id:x})=>[e("h3",{id:x,class:"card-title"},[y(s(t(u)("Broadcasting Service"))+" ",1),i(wt,{running:t(a).services.frontendRunning},null,8,["running"]),h[4]||(h[4]=e("br",null,null,-1)),e("small",null,s(p.value),1)],8,Bn)]),default:b(()=>[t(S)(t(P).Broadcasting)?(l(),r("div",{key:0,class:xt(["collapse",t(n)?"show":""])},[e("table",Ln,[e("tbody",null,[e("tr",An,[e("td",null,[e("a",{href:t(a).frontendAdminUri,target:"_blank"},s(t(u)("Administration")),9,In)]),e("td",Nn,[e("div",null,[y(s(t(u)("Username:"))+" ",1),h[5]||(h[5]=e("span",{class:"text-monospace"},"admin",-1))]),e("div",null,[y(s(t(u)("Password:"))+" ",1),e("span",Hn,s(t(a).frontendAdminPassword),1)])]),e("td",On,[i(K,{text:t(a).frontendAdminPassword,"hide-text":""},null,8,["text"])])]),e("tr",Vn,[e("td",null,s(t(u)("Port")),1),e("td",Fn,[y(s(t(a).frontendPort)+" ",1),v.value?(l(),r("div",Qn,s(t(u)("Some clients may require that you enter a port number that is either one above or one below this number.")),1)):m("",!0)])]),e("tr",Wn,[e("td",null,s(t(u)("Source")),1),e("td",zn,[e("div",null,[y(s(t(u)("Username:"))+" ",1),h[6]||(h[6]=e("span",{class:"text-monospace"},"source",-1))]),e("div",null,[y(s(t(u)("Password:"))+" ",1),e("span",jn,s(t(a).frontendSourcePassword),1)])]),e("td",Jn,[i(K,{text:t(a).frontendSourcePassword,"hide-text":""},null,8,["text"])])]),e("tr",Kn,[e("td",null,s(t(u)("Relay")),1),e("td",Gn,[e("div",null,[y(s(t(u)("Username:"))+" ",1),h[7]||(h[7]=e("span",{class:"text-monospace"},"relay",-1))]),e("div",null,[y(s(t(u)("Password:"))+" ",1),e("span",Yn,s(t(a).frontendRelayPassword),1)])]),e("td",Xn,[i(K,{text:t(a).frontendRelayPassword,"hide-text":""},null,8,["text"])])])])])],2)):m("",!0)]),_:2},[t(S)(t(P).Broadcasting)?{name:"footer_actions",fn:b(()=>[e("a",{class:"btn btn-link text-primary",onClick:h[0]||(h[0]=lt(x=>n.value=!t(n),["prevent"]))},[i(f,{icon:t(Nt)},null,8,["icon"]),e("span",null,s(D.value),1)]),t(o).hasStarted?(l(),r(w,{key:0},[e("button",{type:"button",class:"btn btn-link text-secondary",onClick:h[1]||(h[1]=(...x)=>t(R)&&t(R)(...x))},[i(f,{icon:t(X)},null,8,["icon"]),e("span",null,s(t(u)("Restart")),1)]),t(a).services.frontendRunning?m("",!0):(l(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:h[2]||(h[2]=x=>t(T)())},[i(f,{icon:t(yt)},null,8,["icon"]),e("span",null,s(t(u)("Start")),1)])),t(a).services.frontendRunning?(l(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:h[3]||(h[3]=x=>t(C)())},[i(f,{icon:t(vt)},null,8,["icon"]),e("span",null,s(t(u)("Stop")),1)])):m("",!0)],64)):m("",!0)]),key:"0"}:void 0]),1024))}}),ta={class:"card-body"},ea={class:"card-text"},sa=E({__name:"BackendNonePanel",setup(g){return(o,a)=>(l(),k(L,{id:"profile-backend","header-id":"hdr_backend_disabled",title:o.$gettext("AutoDJ Disabled")},{default:b(()=>[e("div",ta,[e("p",ea,s(o.$gettext("AutoDJ has been disabled for this station. No music will automatically be played when a source is not live.")),1)])]),_:1},8,["title"]))}}),na=["id"],aa={class:"card-body"},la={class:"card-text"},oa={key:0,class:"buttons"},ia=E({__name:"BackendPanel",setup(g){const o=q(),a=N(),c=B("/backend/restart"),d=B("/backend/start"),_=B("/backend/stop"),{$gettext:n,$ngettext:u}=O(),D=U(()=>{const C=u("%{numSongs} uploaded song","%{numSongs} uploaded songs",a.value.numSongs,{numSongs:String(a.value.numSongs)}),$=u("%{numPlaylists} playlist","%{numPlaylists} playlists",a.value.numPlaylists,{numPlaylists:String(a.value.numPlaylists)});return n("LiquidSoap is currently shuffling from %{songs} and %{playlists}.",{songs:C,playlists:$})}),p=U(()=>o.value.backendType===st.Liquidsoap?"Liquidsoap":""),v=I(c,{title:n("Restart service?"),confirmButtonText:n("Restart")}),R=I(d,{title:n("Start service?"),confirmButtonText:n("Start"),confirmButtonClass:"btn-success"}),T=I(_,{title:n("Stop service?"),confirmButtonText:n("Stop"),confirmButtonClass:"btn-danger"});return(C,$)=>{const h=H("router-link");return l(),k(L,{id:"profile-backend","header-id":"hdr_backend"},W({header:b(({id:x})=>[e("h3",{id:x,class:"card-title"},[y(s(t(n)("AutoDJ Service"))+" ",1),i(wt,{running:t(a).services.backendRunning},null,8,["running"]),$[3]||($[3]=e("br",null,null,-1)),e("small",null,s(p.value),1)],8,na)]),default:b(()=>[e("div",aa,[e("p",la,s(D.value),1),t(S)(t(P).Media)?(l(),r("div",oa,[i(h,{class:"btn btn-primary",to:{name:"stations:files:index"}},{default:b(()=>[y(s(t(n)("Music Files")),1)]),_:1}),i(h,{class:"btn btn-primary",to:{name:"stations:playlists:index"}},{default:b(()=>[y(s(t(n)("Playlists")),1)]),_:1})])):m("",!0)])]),_:2},[t(S)(t(P).Broadcasting)&&t(o).hasStarted?{name:"footer_actions",fn:b(()=>[e("button",{type:"button",class:"btn btn-link text-secondary",onClick:$[0]||($[0]=x=>t(v)())},[i(f,{icon:t(X)},null,8,["icon"]),e("span",null,s(t(n)("Restart")),1)]),t(a).services.backendRunning?m("",!0):(l(),r("button",{key:0,type:"button",class:"btn btn-link text-success",onClick:$[1]||($[1]=x=>t(R)())},[i(f,{icon:t(yt)},null,8,["icon"]),e("span",null,s(t(n)("Start")),1)])),t(a).services.backendRunning?(l(),r("button",{key:1,type:"button",class:"btn btn-link text-danger",onClick:$[2]||($[2]=x=>t(T)())},[i(f,{icon:t(vt)},null,8,["icon"]),e("span",null,s(t(n)("Stop")),1)])):m("",!0)]),key:"0"}:void 0]),1024)}}}),ra={class:"card-body"},da={class:"card-text"},ca=E({__name:"NowPlayingNotStartedPanel",setup(g){return(o,a)=>(l(),k(L,{id:"profile-now-playing","header-id":"hdr_now_playing",title:o.$gettext("On the Air")},{default:b(()=>[e("div",ra,[e("p",da,s(o.$gettext("Information about the current playing track will appear here once your station has started.")),1)])]),_:1},8,["title"]))}}),ua={id:"profile",class:"row row-of-cards"},_a={class:"col-lg-7"},pa={class:"col-lg-5"},ma=E({__name:"EnabledProfile",setup(g){const o=q(),a=U(()=>o.value.frontendType!==V.Remote),c=U(()=>o.value.backendType!==st.None);return(d,_)=>(l(),r(w,null,[i(je),e("div",ua,[e("div",_a,[t(o).hasStarted?(l(),r(w,{key:0},[i(js),i(Xs),i(He)],64)):(l(),k(ca,{key:1})),i(Mn)]),e("div",pa,[c.value?(l(),k(tn,{key:0})):m("",!0),c.value?(l(),k(sn,{key:1})):m("",!0),a.value?(l(),k(Zn,{key:2})):m("",!0),c.value?(l(),k(ia,{key:3})):(l(),k(sa,{key:4}))])])],64))}}),el=E({__name:"Profile",setup(g){const o=q(),{isLoading:a,isPlaceholderData:c}=Ut(),{isLoading:d}=Et();return(_,n)=>t(o).isEnabled?(l(),k(zt,{key:0,loading:t(a)||t(d)||t(c),lazy:""},{default:b(()=>[i(ma)]),_:1},8,["loading"])):(l(),k(ce,{key:1}))}});export{el as default};
