import{ab as C,u as B,a5 as k,f as A,g as S,ac as u}from"./layout-CUzOT8aY.js";import{c as D,e as _,h as U}from"./useStationQuery-ClAZEJp_.js";import{b as F}from"./vue-router-Cafqdr3I.js";import{E as T}from"./estoolkit-DCzBkaPJ.js";import{d as E,r as L,c as r,o as c,a as t,t as o,u as a,F as g}from"./vue-BsfewpWM.js";import"./leaflet-DkUWBo0d.js";import"./hlsjs-BVyhFw5s.js";import"./bootstrap.esm-30QIU_ZL.js";const N={class:"outside-card-header mb-1"},Q={class:"row"},Y={class:"col col-md-6"},I={class:"card",role:"region","aria-labelledby":"hdr_soft_reload"},V={class:"card-header text-bg-primary"},W={id:"hdr_soft_reload",class:"card-title"},$={class:"card-body"},j={class:"card-text"},q={class:"card-text has-text-weight-bold text-body-emphasis"},z={class:"card-text text-success"},G={class:"buttons"},H=["disabled"],J={key:1,class:"card-text text-danger"},K={class:"col col-md-6"},M={class:"card",role:"region","aria-labelledby":"hdr_restart_broadcasting"},O={class:"card-header text-bg-primary"},P={id:"hdr_restart_broadcasting",class:"card-title"},X={class:"card-body"},Z={class:"card-text"},tt={class:"card-text has-text-weight-bold text-body-emphasis"},st={class:"buttons"},at=["disabled"],_t=E({__name:"Restart",setup(ot){const h=D(),{canReload:p}=C(h),b=_("/reload"),f=_("/restart"),n=L(!1),{axios:m}=B(),{showAlert:d}=k(),{notify:y}=A(),{$gettext:s}=S(),x=F(),w=U(),l=async e=>{n.value=!0;try{const{data:i}=await m.post(e);y(i.formatted_message,{variant:i.success?u.Success:u.Warning}),await T(2e3),await x.push({name:"stations:index"}),await w()}finally{n.value=!1}},v=async()=>{const{value:e}=await d({title:s("Are you sure?"),confirmButtonClass:"btn-warning",confirmButtonText:s("Reload Configuration")});e&&await l(b.value)},R=async()=>{const{value:e}=await d({title:s("Are you sure?"),confirmButtonClass:"btn-warning",confirmButtonText:s("Restart Broadcasting")});e&&await l(f.value)};return(e,i)=>(c(),r(g,null,[t("h2",N,o(a(s)("Update Station Configuration")),1),t("div",Q,[t("div",Y,[t("section",I,[t("div",V,[t("h3",W,o(a(s)("Reload Configuration")),1)]),t("div",$,[t("p",j,o(a(s)("Stations using Icecast can soft-reload the station configuration, applying changes while keeping the stream broadcast running.")),1),t("p",q,o(a(s)("Reloading broadcasting will not disconnect your listeners.")),1),a(p)?(c(),r(g,{key:0},[t("p",z,o(a(s)("Your station supports reloading configuration.")),1),t("div",G,[t("button",{type:"button",class:"btn btn-warning",disabled:n.value,onClick:v},o(a(s)("Reload Configuration")),9,H)])],64)):(c(),r("p",J,o(a(s)("Your station does not support reloading configuration. Restart broadcasting instead to apply changes.")),1))])])]),t("div",K,[t("section",M,[t("div",O,[t("h3",P,o(a(s)("Restart Broadcasting")),1)]),t("div",X,[t("p",Z,o(a(s)("Restarting broadcasting will rewrite all configuration files and restart all services.")),1),t("p",tt,o(a(s)("Restarting broadcasting will briefly disconnect your listeners.")),1),t("div",st,[t("button",{type:"button",class:"btn btn-warning",disabled:n.value,onClick:R},o(a(s)("Restart Broadcasting")),9,at)])])])])])],64))}});export{_t as default};
