import{_ as K}from"./DataTable-BhAO7RbG.js";import{_ as m}from"./FormGroupField-K9S4Sadl.js";import{_ as I}from"./FormGroupCheckbox-ZsJmXmB6.js";import{_ as N}from"./FormGroupMultiCheck-z3kTFzdV.js";import{_ as U,a as Y}from"./Tabs-DMTPhsiO.js";import{d as Q,N as b,al as x,s as M,ab as z,f as W,g as O}from"./layout-CUzOT8aY.js";import{u as L}from"./useFormTabClass-DgI07GN4.js";import{u as X,r as P}from"./regle-hGsoY2W9.js";import{r as Z,d as D,q as A,m as w,o as u,u as e,e as l,a as g,b as s,f as h,t as d,c as R,i as E,s as ee,g as V,K as te,F as C}from"./vue-BsfewpWM.js";import{_ as oe}from"./BitrateOptions-CGWdTyiI.js";import{c as ae,e as se,q as ie,Q as re}from"./useStationQuery-ClAZEJp_.js";import{u as le}from"./useBaseEditModal-D4NDXa4y.js";import{_ as ne}from"./ModalForm-D0z4l5nm.js";import{m as de}from"./mergeExisting-B6FvxI3v.js";import{u as me}from"./useMayNeedRestart-CTqbUxcB.js";import{s as ue}from"./showFormatAndBitrate-A6eyA-Ye.js";import{u as ce,_ as pe}from"./AddButton-DLx8r-7e.js";import{u as _e}from"./useConfirmAndDelete-CuQodV6V.js";import{_ as fe}from"./CardPage-Cth3uewv.js";import{u as be}from"./useApiItemProvider-DAIhDonu.js";import"./icons-BAjd3tML.js";import"./FormMultiCheck-RiRcopXY.js";import"./map-Caxea7Kw.js";import"./estoolkit-DCzBkaPJ.js";import"./isArrayLike-DknTMkCU.js";import"./iteratee-DJRL6CbS.js";import"./FormCheckbox-Cc7beVle.js";import"./isTypedArray-By1PpNM0.js";import"./some-B0KiPFWm.js";import"./forEach-BFcv9GyE.js";import"./FormGroup-DXDHSoyc.js";import"./ValidationError-DsAp6Fjg.js";import"./useSlotsExcept-Dp0PSXNw.js";import"./leaflet-DkUWBo0d.js";import"./hlsjs-BVyhFw5s.js";import"./bootstrap.esm-30QIU_ZL.js";import"./zxcvbn-Bgw4VUEj.js";import"./RadioWithCustomNumber-B3JRVqX_.js";import"./find-B-AZI_Kz.js";import"./vue-router-Cafqdr3I.js";import"./InvisibleSubmitButton-NGv_v7G8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useHasModal-Bq3QxExQ.js";import"./Loading-CQdAiB8R.js";import"./InfoCard-D5Q671bF.js";const T=Q("form-stations-remotes",()=>{const f=Z({display_name:"",type:x.Icecast,custom_listen_url:null,url:"",mount:null,admin_password:null,is_visible_on_public_pages:!0,enable_autodj:!1,autodj_format:b.Mp3,autodj_bitrate:128,source_port:null,source_mount:null,source_username:null,source_password:null,is_public:!1}),{r$:t}=X(f,{type:{required:P},url:{required:P}},{validationGroups:o=>({basicInfoTab:[o.display_name,o.type,o.custom_listen_url,o.url,o.mount,o.admin_password,o.is_visible_on_public_pages],autoDjTab:[o.enable_autodj,o.autodj_format,o.autodj_bitrate,o.source_port,o.source_mount,o.source_username,o.source_password,o.is_public]})});return{form:f,r$:t,$reset:()=>{t.$reset({toOriginalState:!0})}}}),ge={class:"row g-3"},$e=D({__name:"BasicInfo",setup(f){const{r$:t}=M(T()),i=L(A(()=>t.value.$groups.basicInfoTab)),o=[{value:x.Icecast,text:"Icecast v2.4+"},{value:x.Shoutcast1,text:"Shoutcast v1"},{value:x.Shoutcast2,text:"Shoutcast v2"}];return(a,c)=>(u(),w(U,{label:a.$gettext("Basic Info"),"item-header-class":e(i)},{default:l(()=>[g("div",ge,[s(N,{id:"edit_form_type",class:"col-md-12",field:e(t).type,options:o,stacked:"",radio:"",label:a.$gettext("Remote Station Type")},null,8,["field","label"]),s(m,{id:"edit_form_display_name",class:"col-md-6",field:e(t).display_name,label:a.$gettext("Display Name"),description:a.$gettext("The display name assigned to this relay when viewing it on administrative or public pages. Leave blank to automatically generate one.")},null,8,["field","label","description"]),s(m,{id:"edit_form_url",class:"col-md-6",field:e(t).url,label:a.$gettext("Remote Station Listening URL")},{description:l(()=>[h(d(a.$gettext('Example: if the remote radio URL is http://station.example.com:8000/radio.mp3, enter "http://station.example.com:8000".')),1)]),_:1},8,["field","label"]),s(m,{id:"edit_form_mount",class:"col-md-6",field:e(t).mount,label:a.$gettext("Remote Station Listening Mountpoint/SID")},{description:l(()=>[h(d(a.$gettext('Specify a mountpoint (i.e. "/radio.mp3") or a Shoutcast SID (i.e. "2") to specify a specific stream to use for statistics or broadcasting.')),1)]),_:1},8,["field","label"]),s(m,{id:"edit_form_admin_password",class:"col-md-6",field:e(t).admin_password,label:a.$gettext("Remote Station Administrator Password"),description:a.$gettext("To retrieve detailed unique listeners and client details, an administrator password is often required.")},null,8,["field","label","description"]),s(I,{id:"edit_form_is_visible_on_public_pages",class:"col-md-6",field:e(t).is_visible_on_public_pages,label:a.$gettext("Show on Public Pages"),description:a.$gettext("Enable to allow listeners to select this relay on this station's public pages.")},null,8,["field","label","description"])])]),_:1},8,["label","item-header-class"]))}}),ye={class:"row g-3 mb-3"},he={key:0,class:"row g-3"},ve=D({__name:"AutoDj",setup(f){const{r$:t,form:i}=M(T()),o=L(A(()=>t.value.$groups.autoDjTab)),a=ae(),{maxBitrate:c}=z(a),$=[{value:b.Mp3,text:"MP3"},{value:b.Ogg,text:"OGG Vorbis"},{value:b.Opus,text:"OGG Opus"},{value:b.Aac,text:"AAC+ (MPEG4 HE-AAC v2)"},{value:b.Flac,text:"FLAC (OGG FLAC)"}],y=A(()=>i.value?.autodj_format!==b.Flac);return(r,p)=>(u(),w(U,{label:r.$gettext("AutoDJ"),"item-header-class":e(o)},{default:l(()=>[g("div",ye,[s(I,{id:"edit_form_enable_autodj",class:"col-md-12",field:e(t).enable_autodj,label:r.$gettext("Broadcast AutoDJ to Remote Station"),description:r.$gettext("If enabled, the AutoDJ on this installation will automatically play music to this mount point.")},null,8,["field","label","description"])]),e(i).enable_autodj?(u(),R("div",he,[s(N,{id:"edit_form_autodj_format",class:"col-md-6",field:e(t).autodj_format,options:$,stacked:"",radio:"",label:r.$gettext("AutoDJ Format")},null,8,["field","label"]),y.value?(u(),w(m,{key:0,id:"edit_form_autodj_bitrate",class:"col-md-6",field:e(t).autodj_bitrate,label:r.$gettext("AutoDJ Bitrate (kbps)")},{default:l(({id:v,model:S,fieldClass:_})=>[s(oe,{id:v,modelValue:S.$model,"onUpdate:modelValue":n=>S.$model=n,class:ee(_),"max-bitrate":e(c)},null,8,["id","modelValue","onUpdate:modelValue","class","max-bitrate"])]),_:1},8,["field","label"])):E("",!0),s(m,{id:"edit_form_source_port",class:"col-md-6",field:e(t).source_port,label:r.$gettext("Remote Station Source Port"),description:r.$gettext("If the port you broadcast to is different from the stream URL, specify the source port here.")},null,8,["field","label","description"]),s(m,{id:"edit_form_source_mount",class:"col-md-6",field:e(t).source_mount,label:r.$gettext("Remote Station Source Mountpoint/SID"),description:r.$gettext("If the mountpoint (i.e. /radio.mp3) or Shoutcast SID (i.e. 2) you broadcast to is different from the stream URL, specify the source mount point here.")},null,8,["field","label","description"]),s(m,{id:"edit_form_source_username",class:"col-md-6",field:e(t).source_username,label:r.$gettext("Remote Station Source Username"),description:r.$gettext("If you are broadcasting using AutoDJ, enter the source username here. This may be blank.")},null,8,["field","label","description"]),s(m,{id:"edit_form_source_password",class:"col-md-6",field:e(t).source_password,label:r.$gettext("Remote Station Source Password"),description:r.$gettext("If you are broadcasting using AutoDJ, enter the source password here.")},null,8,["field","label","description"]),s(I,{id:"edit_form_is_public",class:"col-md-6",field:e(t).is_public},{label:l(()=>[h(d(r.$gettext('Publish to "Yellow Pages" Directories')),1)]),description:l(()=>[h(d(r.$gettext('Enable to advertise this relay on "Yellow Pages" public radio directories.')),1)]),_:1},8,["field"])])):E("",!0)]),_:1},8,["label","item-header-class"]))}}),Se=D({__name:"EditModal",props:{createUrl:{}},emits:["relist","needs-restart"],setup(f,{expose:t,emit:i}){const o=f,a=i,c=V("$modal"),{notifySuccess:$}=W(),y=T(),{form:r,r$:p}=M(y),{$reset:v}=y,{loading:S,error:_,isEditMode:n,clearContents:j,create:G,edit:J,doSubmit:q,close:B}=le(te(o,"createUrl"),a,c,v,k=>{p.value.$reset({toState:de(p.value.$value,k)})},async()=>{const{valid:k}=await p.value.$validate();return{valid:k,data:r.value}},{onSubmitSuccess:()=>{$(),a("relist"),a("needs-restart"),B()}}),{$gettext:F}=O(),H=A(()=>n.value?F("Edit Remote Relay"):F("Add Remote Relay"));return t({create:G,edit:J,close:B}),(k,je)=>(u(),w(ne,{ref_key:"$modal",ref:c,loading:e(S),title:H.value,error:e(_),"disable-save-button":e(p).$invalid,onSubmit:e(q),onHidden:e(j)},{default:l(()=>[s(Y,null,{default:l(()=>[s($e),s(ve)]),_:1})]),_:1},8,["loading","title","error","disable-save-button","onSubmit","onHidden"]))}}),Re={class:"card-text"},ke={class:"m-0"},xe=["href"],Ae={key:0,class:"btn-group btn-group-sm"},we=["onClick"],De=["onClick"],vt=D({__name:"Remotes",setup(f){const t=se("/remotes"),{$gettext:i}=O(),o=[{key:"display_name",isRowHeader:!0,label:i("Name"),sortable:!0},{key:"enable_autodj",label:i("AutoDJ"),sortable:!0},{key:"actions",label:i("Actions"),sortable:!1,class:"shrink"}],a=be(t,ie([re.StationRemotes])),c=()=>{a.refresh()},$=V("$editModal"),{doCreate:y,doEdit:r}=ce($),{mayNeedRestart:p}=me(),{doDelete:v}=_e(i("Delete Remote Relay?"),()=>{p(),c()});return(S,_)=>(u(),R(C,null,[s(fe,{title:e(i)("Remote Relays")},{info:l(()=>[g("p",Re,d(e(i)("Remote relays let you work with broadcasting software outside this server. Any relay you include here will be included in your station's statistics. You can also broadcast from this server to remote relays.")),1)]),actions:l(()=>[s(pe,{text:e(i)("Add Remote Relay"),onClick:e(y)},null,8,["text","onClick"])]),default:l(()=>[s(K,{id:"station_remotes",paginated:"",fields:o,provider:e(a)},{"cell(display_name)":l(n=>[g("h5",ke,[g("a",{href:n.item.url,target:"_blank"},d(n.item.display_name),9,xe)])]),"cell(enable_autodj)":l(n=>[n.item.enable_autodj?(u(),R(C,{key:0},[h(d(e(i)("Enabled"))+" - "+d(e(ue)(n.item.autodj_format,n.item.autodj_bitrate)),1)],64)):(u(),R(C,{key:1},[h(d(e(i)("Disabled")),1)],64))]),"cell(actions)":l(n=>[n.item.is_editable?(u(),R("div",Ae,[g("button",{type:"button",class:"btn btn-primary",onClick:j=>e(r)(n.item.links.self)},d(e(i)("Edit")),9,we),g("button",{type:"button",class:"btn btn-danger",onClick:j=>e(v)(n.item.links.self)},d(e(i)("Delete")),9,De)])):E("",!0)]),_:1},8,["provider"])]),_:1},8,["title"]),s(Se,{ref_key:"$editModal",ref:$,"create-url":e(t),onRelist:_[0]||(_[0]=()=>c()),onNeedsRestart:_[1]||(_[1]=()=>e(p)())},null,8,["create-url"])],64))}});export{vt as default};
