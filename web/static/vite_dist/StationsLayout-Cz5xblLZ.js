import{$ as C,a0 as T,a1 as F,a2 as L,a3 as $,l as q,a4 as E,a5 as U,a6 as H,R as V,L as j,_ as A}from"./icons-BAjd3tML.js";import{_ as N,a as O}from"./SidebarMenu-BDNtG031.js";import{g as W,S as t,r as z,ab as Q,a2 as J}from"./layout-CUzOT8aY.js";import{f as Y}from"./filterMenu-BX5NScds.js";import{a as i}from"./acl-BtcXS2wX.js";import{c as R,d as G}from"./useStationQuery-ClAZEJp_.js";import{q as s,d as I,r as K,j as B,c as k,o as p,a as l,i as P,b as r,m as D,e as m,f as X,t as c,u as o,F as M}from"./vue-BsfewpWM.js";import{u as Z}from"./useStationDateTimeFormatter-CkmvkIuo.js";import{u as ee}from"./luxon-m3VuE4xT.js";import{_ as w}from"./Loading-CQdAiB8R.js";import"./PanelFooter-D_-n9Oyr.js";import"./vue-router-Cafqdr3I.js";import"./some-B0KiPFWm.js";import"./estoolkit-DCzBkaPJ.js";import"./iteratee-DJRL6CbS.js";import"./leaflet-DkUWBo0d.js";import"./hlsjs-BVyhFw5s.js";import"./bootstrap.esm-30QIU_ZL.js";import"./map-Caxea7Kw.js";import"./isArrayLike-DknTMkCU.js";import"./luxon-F75Z0klY.js";function se(){const{$gettext:e}=W(),a=R(),n=i(t.Media),v=z(()=>{const g={key:"profile",label:s(()=>e("Profile")),icon:C,items:[{key:"view_profile",label:s(()=>e("View Profile")),url:{name:"stations:index"}},{key:"edit_profile",label:s(()=>e("Edit Profile")),url:{name:"stations:profile:edit"},visible:i(t.Profile)},{key:"branding",label:s(()=>e("Branding")),url:{name:"stations:branding"},visible:i(t.Profile)}]},f={key:"public_page",label:s(()=>e("Public Page")),icon:T,url:a.value.publicPageUrl,external:!0,visible:a.value.enablePublicPages},y={key:"media",label:s(()=>e("Media")),icon:F,visible:a.value.features.media,items:[{key:"music_files",label:s(()=>e("Music Files")),url:{name:"stations:files:index"},visible:n},{key:"duplicate_songs",label:s(()=>e("Duplicate Songs")),url:{name:"stations:files:index",params:{path:"special:duplicates"}},visible:n},{key:"unprocessable",label:s(()=>e("Unprocessable Files")),url:{name:"stations:files:index",params:{path:"special:unprocessable"}},visible:n},{key:"unassigned",label:s(()=>e("Unassigned Files")),url:{name:"stations:files:index",params:{path:"special:unassigned"}},visible:n},{key:"ondemand",label:s(()=>e("On-Demand Media")),url:a.value.onDemandUrl,external:!0,visible:a.value.enableOnDemand},{key:"sftp_users",label:s(()=>e("SFTP Users")),url:{name:"stations:sftp_users:index"},visible:n&&a.value.features.sftp},{key:"bulk_media",label:s(()=>e("Bulk Media Import/Export")),url:{name:"stations:bulk-media"},visible:n}]},x={key:"playlists",label:s(()=>e("Playlists")),icon:L,url:{name:"stations:playlists:index"},visible:n&&a.value.features.media},h={key:"podcasts",label:s(()=>e("Podcasts")),icon:$,url:{name:"stations:podcasts:index"},visible:i(t.Podcasts)&&a.value.features.podcasts},S={key:"streaming",label:s(()=>e("Live Streaming")),icon:q,visible:i(t.Streamers)&&a.value.features.streamers,items:[{key:"streamers",label:s(()=>e("Streamer/DJ Accounts")),url:{name:"stations:streamers:index"},visible:i(t.Streamers)},{key:"webdj",label:s(()=>e("Web DJ")),url:a.value?.webDjUrl,external:!0,visible:a.value.enablePublicPages}]},_={key:"webhooks",label:s(()=>e("Web Hooks")),icon:E,url:{name:"stations:webhooks:index"},visible:i(t.WebHooks)&&a.value.features.webhooks},u={key:"reports",label:s(()=>e("Reports")),icon:U,visible:i(t.Reports),items:[{key:"reports_overview",label:s(()=>e("Station Statistics")),url:{name:"stations:reports:overview"}},{key:"reports_listeners",label:s(()=>e("Listeners")),url:{name:"stations:reports:listeners"}},{key:"reports_requests",label:s(()=>e("Song Requests")),url:{name:"stations:reports:requests"},visible:i(t.Broadcasting)&&a.value.enableRequests},{key:"reports_timeline",label:s(()=>e("Song Playback Timeline")),url:{name:"stations:reports:timeline"}},{key:"reports_soundexchange",label:s(()=>e("SoundExchange Royalties")),url:{name:"stations:reports:soundexchange"}}]},d={key:"broadcasting",label:s(()=>e("Broadcasting")),icon:H,items:[{key:"mounts",label:s(()=>e("Mount Points")),url:{name:"stations:mounts:index"},visible:i(t.MountPoints)&&a.value.features.mountPoints},{key:"hls_streams",label:s(()=>e("HLS Streams")),url:{name:"stations:hls_streams:index"},visible:i(t.MountPoints)&&a.value.features.hlsStreams},{key:"remotes",label:s(()=>e("Remote Relays")),url:{name:"stations:remotes:index"},visible:i(t.RemoteRelays)&&a.value.features.remoteRelays},{key:"fallback",label:s(()=>e("Custom Fallback File")),url:{name:"stations:fallback"},visible:i(t.Broadcasting)&&a.value.features.media},{key:"ls_config",label:s(()=>e("Edit Liquidsoap Configuration")),url:{name:"stations:util:ls_config"},visible:i(t.Broadcasting)&&a.value.features.customLiquidsoapConfig},{key:"stereo_tool",label:s(()=>e("Upload Stereo Tool Configuration")),url:{name:"stations:stereo_tool_config"},visible:a.value.features.media&&i(t.Broadcasting)},{key:"queue",label:s(()=>e("Upcoming Song Queue")),url:{name:"stations:queue:index"},visible:i(t.Broadcasting)&&a.value.features.autoDjQueue},{key:"restart",label:s(()=>e("Restart Broadcasting")),url:{name:"stations:restart:index"},visible:i(t.Broadcasting)}]},b={key:"logs",label:s(()=>e("Logs")),icon:V,url:{name:"stations:logs"},visible:i(t.Logs)};return{categories:[g,f,y,x,h,S,_,u,d,b]}});return Y(v)}const ae={class:"navdrawer-header offcanvas-header"},te={class:"d-flex align-items-center"},ie=["title"],oe={class:"visually-hidden"},ne={key:0,class:"navdrawer-alert bg-success-subtle text-success-emphasis"},le={class:"fw-bold"},re={key:1,class:"navdrawer-alert bg-warning-subtle text-warning-emphasis"},ue={class:"fw-bold"},me={class:"offcanvas-body"},ce=I({__name:"Sidebar",setup(e){const a=se(),n=R(),{name:v,hasStarted:g,needsRestart:f,timezone:y}=Q(n),{DateTime:x}=ee(),{now:h,formatDateTimeAsTime:S}=Z(y),_=K("");return J(()=>{_.value=S(h(),x.TIME_WITH_SHORT_OFFSET)},1e3,{immediate:!0,immediateCallback:!0}),(u,d)=>{const b=B("router-link");return p(),k(M,null,[l("div",ae,[l("div",te,[r(b,{to:{name:"stations:index"},class:"navbar-brand px-0 flex-fill"},{default:m(()=>[X(c(o(v))+" ",1),l("div",{id:"station-time",class:"fs-6",title:u.$gettext("Station Time")},c(_.value),9,ie)]),_:1}),o(i)(o(t).Profile)?(p(),D(b,{key:0,to:{name:"stations:profile:edit"},class:"navbar-brand ms-0 flex-shrink-0"},{default:m(()=>[r(A,{icon:o(j)},null,8,["icon"]),l("span",oe,c(u.$gettext("Edit Profile")),1)]),_:1})):P("",!0)])]),o(i)(o(t).Broadcasting)?(p(),k(M,{key:0},[o(g)?o(f)?(p(),k("div",re,[r(b,{to:{name:"stations:restart:index"}},{default:m(()=>[l("span",ue,c(u.$gettext("Reload to Apply Changes")),1),d[1]||(d[1]=l("br",null,null,-1)),l("small",null,c(u.$gettext("Your station has changes that require a reload to apply.")),1)]),_:1})])):P("",!0):(p(),k("div",ne,[r(b,{to:{name:"stations:restart:index"}},{default:m(()=>[l("span",le,c(u.$gettext("Start Station")),1),d[0]||(d[0]=l("br",null,null,-1)),l("small",null,c(u.$gettext("Ready to start broadcasting? Click to start your station.")),1)]),_:1})]))],64)):P("",!0),l("div",me,[r(N,{menu:o(a)},null,8,["menu"])])],64)}}}),Fe=I({__name:"StationsLayout",setup(e){const{isLoading:a,isPlaceholderData:n}=G();return(v,g)=>{const f=B("router-view");return p(),D(O,null,{sidebar:m(()=>[r(w,{lazy:"",loading:o(a)||o(n)},{default:m(()=>[r(ce)]),_:1},8,["loading"])]),default:m(()=>[r(w,{lazy:"",loading:o(a)||o(n)},{default:m(()=>[r(f)]),_:1},8,["loading"])]),_:1})}}});export{Fe as default};
