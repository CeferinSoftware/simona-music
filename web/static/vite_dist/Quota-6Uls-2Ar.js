import{g as h,u as q}from"./layout-CUzOT8aY.js";import{d as w,r as C,G as k,q as c,h as F,c as s,i as S,o as t,F as d,a as p,f as v,E as N,s as T,t as l}from"./vue-BsfewpWM.js";const V={key:0,style:{"line-height":"1"}},B=["aria-label","aria-valuenow"],$=w({__name:"Quota",props:{quotaUrl:{}},emits:["updated"],setup(_,{expose:m,emit:f}){const g=_,b=f,u=C(!0),e=k({used:"",used_bytes:"",used_percent:0,available:"",available_bytes:"",quota:null,quota_bytes:null,is_full:!1,num_files:null}),x=c(()=>e.value.used_percent>85?"text-bg-danger":e.value.used_percent>65?"text-bg-warning":"text-bg-default"),{$gettext:n,$ngettext:y}=h(),r=c(()=>{let a;if(e.value.available?a=n("%{spaceUsed} of %{spaceTotal} Used",{spaceUsed:e.value.used,spaceTotal:e.value.available}):a=n("%{spaceUsed} Used",{spaceUsed:e.value.used}),e.value.num_files!==null){const i=y("%{filesCount} File","%{filesCount} Files",e.value.num_files,{filesCount:String(e.value.num_files)});return a+" ("+i+")"}return a}),{axios:U}=q(),o=async()=>{const{data:a}=await U.get(g.quotaUrl);e.value=a,u.value=!1,b("updated",e.value)};return F(o),m({update:o}),(a,i)=>u.value?S("",!0):(t(),s("div",V,[e.value.available?(t(),s(d,{key:0},[p("div",{class:"progress h-20 mb-2",role:"progressbar","aria-label":e.value.used_percent+"%","aria-valuenow":e.value.used_percent,"aria-valuemin":"0","aria-valuemax":"100"},[p("div",{class:T(["progress-bar",x.value]),style:N({width:e.value.used_percent+"%"})},l(e.value.used_percent)+" % ",7)],8,B),v(" "+l(r.value),1)],64)):(t(),s(d,{key:1},[v(l(r.value),1)],64))]))}});export{$ as _};
