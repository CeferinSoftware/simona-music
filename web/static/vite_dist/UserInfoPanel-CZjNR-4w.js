import{g as y,u as k}from"./layout-CUzOT8aY.js";import{d as f,q as x,c as t,i as l,o as s,u as e,a as d,E as b,a9 as A,m as h,e as U,t as i,F as $,D as w,k as C}from"./vue-BsfewpWM.js";import{g as B,a as S,Q as q}from"./useStationQuery-ClAZEJp_.js";import{_ as z}from"./Loading-CQdAiB8R.js";const D=["href","title","aria-label"],F=["src"],Q=f({__name:"Avatar",props:{url:{},service:{},serviceUrl:{},width:{default:64}},setup(m){const c=m,{$gettext:o}=y(),u=x(()=>o("Avatars are retrieved based on your e-mail address from the %{service} service. Click to manage your %{service} settings.",{service:c.service??""}));return(r,a)=>r.serviceUrl?(s(),t("a",{key:0,href:r.serviceUrl,class:"avatar",target:"_blank",title:u.value,"aria-label":e(o)("Manage Avatar")},[d("img",{src:r.url,style:b({width:r.width+"px",height:"auto"}),alt:""},null,12,F)],8,D)):l("",!0)}}),E={key:0,class:"card-header text-bg-primary d-flex flex-wrap align-items-center"},I={class:"flex-fill"},K={key:0,class:"card-title mt-0"},L={key:1,class:"card-title"},N={class:"card-subtitle"},V={key:2,class:"mt-2"},M={key:1,class:"flex-md-shrink-0 mt-3 mt-md-0 buttons"},J=f({__name:"UserInfoPanel",setup(m,{expose:c}){const o=A(),{axios:u}=k(),r=B("/frontend/account/me"),{data:a,isLoading:p,refetch:g}=S({queryKey:[q.AccountIndex,"profile"],queryFn:async({signal:n})=>{const{data:_}=await u.get(r.value,{signal:n});return _},placeholderData:()=>({name:null,email:"",avatar:{url_32:"",url_64:"",url_128:"",service_name:"",service_url:""},roles:[]})});return c({reload:()=>{g()}}),(n,_)=>(s(),h(z,{loading:e(p),lazy:""},{default:U(()=>[e(a)?(s(),t("div",E,[e(a).avatar.url_128?(s(),h(Q,{key:0,class:"flex-shrink-0 me-3",url:e(a).avatar.url_128,service:e(a).avatar.service_name,"service-url":e(a).avatar.service_url},null,8,["url","service","service-url"])):l("",!0),d("div",I,[e(a).name?(s(),t("h2",K,i(e(a).name),1)):(s(),t("h2",L,i(n.$gettext("AzuraCast User")),1)),d("h3",N,i(e(a).email),1),e(a).roles.length>0?(s(),t("div",V,[(s(!0),t($,null,w(e(a).roles,v=>(s(),t("span",{key:v.id,class:"badge text-bg-secondary me-2"},i(v.name),1))),128))])):l("",!0)]),o.default?(s(),t("div",M,[C(n.$slots,"default")])):l("",!0)])):l("",!0)]),_:3},8,["loading"]))}});export{J as _};
