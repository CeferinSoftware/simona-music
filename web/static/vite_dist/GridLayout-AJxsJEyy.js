import{a as m}from"./DataTable-BhAO7RbG.js";import{c as O}from"./layout-CUzOT8aY.js";import{d as $,q as s,r as T,B as f,c as o,o as t,i,a as h,b as V,k as y,t as P,f as D,F,D as S,m as U}from"./vue-BsfewpWM.js";const q=["id"],E={key:0,class:"datatable-toolbar-top card-body"},G={class:"grid-main card-body"},I={key:0,class:"spinner-border",role:"status"},R={class:"visually-hidden"},j={key:2,class:"row view-group"},x={key:1,class:"datatable-toolbar-bottom card-body"},J=$({__name:"GridLayout",props:{id:{},provider:{},paginated:{type:Boolean,default:!1},hideOnLoading:{type:Boolean,default:!0},showToolbar:{type:Boolean,default:!0},pageOptions:{default:()=>[10,25,50,100,250,500,0]},defaultPerPage:{default:10}},setup(b,{expose:_}){const a=b,u=s(()=>a.provider.total.value),p=s(()=>a.provider.rows.value),k=s(()=>a.provider.loading.value),r=T(1),w=O("grid_"+a.id+"_settings",{perPage:a.defaultPerPage},{mergeDefaults:!0}),n=s(()=>a.paginated?w.value?.perPage??a.defaultPerPage:-1),B=s(()=>({searchPhrase:"",currentPage:r.value,sortField:null,sortOrder:null,paginated:a.paginated,perPage:n.value}));f(B,e=>{a.provider.setContext(e)},{immediate:!0});const C=s(()=>a.paginated&&n.value!==0),c=async(e=!1)=>{await a.provider.refresh(e)},L=()=>{c(!1)},g=e=>{r.value=e},v=()=>{c(!0)};return f(n,()=>{r.value=1,v()}),_({refresh:L,relist:v}),(e,d)=>(t(),o("div",{id:e.id,class:"datatable-wrapper"},[e.showToolbar?(t(),o("div",E,[V(m,{"current-page":r.value,"onUpdate:currentPage":d[0]||(d[0]=l=>r.value=l),total:u.value,"per-page":n.value,onChange:g},null,8,["current-page","total","per-page"])])):i("",!0),h("div",G,[k.value&&e.hideOnLoading?(t(),o("div",I,[h("span",R,P(e.$gettext("Loading")),1)])):p.value.length===0?y(e.$slots,"empty",{key:1},()=>[D(P(e.$gettext("No records.")),1)]):(t(),o("div",j,[(t(!0),o(F,null,S(p.value,(l,N)=>(t(),o("div",{key:N,class:"item col-sm-6 col-lg-4"},[y(e.$slots,"item",{item:l})]))),128))]))]),e.showToolbar?(t(),o("div",x,[C.value?(t(),U(m,{key:0,"current-page":r.value,"onUpdate:currentPage":d[1]||(d[1]=l=>r.value=l),total:u.value,"per-page":n.value,onChange:g},null,8,["current-page","total","per-page"])):i("",!0)])):i("",!0)],8,q))}});export{J as _};
