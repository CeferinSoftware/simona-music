import{u as w}from"./layout-CUzOT8aY.js";import{_ as b}from"./Loading-CQdAiB8R.js";import{_ as k}from"./FormGroup-DXDHSoyc.js";import{_ as x}from"./FormFile-B5B3WV6y.js";import{a as C}from"./lightbox-B9nVyWr-.js";import{d as U,r,h as $,c as l,o as d,a as c,w as D,i as f,u as N,b as u,e as m,f as V,t as _}from"./vue-BsfewpWM.js";const B={class:"d-flex"},L={class:"flex-shrink-0"},A=["href"],E=["src","alt"],F={class:"flex-grow-1 ms-3"},z=U({__name:"CustomAssetForm",props:{id:{},apiUrl:{},caption:{}},setup(v){const s=v,o=r(!0),p=r(!1),e=r(null),{axios:i}=w(),n=async()=>{o.value=!0;const{data:a}=await i.get(s.apiUrl);p.value=a.hasRecord,e.value=a.url,o.value=!1};$(n);const h=async a=>{if(a===null)return;const t=new FormData;t.append("file",a);try{await i.post(s.apiUrl,t)}finally{await n()}},g=async()=>{try{await i.delete(s.apiUrl)}finally{await n()}},{vLightbox:y}=C();return(a,t)=>(d(),l("div",B,[c("div",L,[e.value?D((d(),l("a",{key:0,href:e.value,target:"_blank"},[c("img",{src:e.value,width:"125",alt:a.caption},null,8,E)],8,A)),[[N(y)]]):f("",!0)]),c("div",F,[u(b,{loading:o.value},{default:m(()=>[u(k,{id:a.id},{label:m(()=>[V(_(a.caption),1)]),default:m(()=>[u(x,{id:a.id,onUploaded:h},null,8,["id"])]),_:1},8,["id"]),p.value?(d(),l("button",{key:0,type:"button",class:"btn btn-danger mt-3",onClick:t[0]||(t[0]=I=>g())},_(a.$gettext("Clear Image")),1)):f("",!0)]),_:1},8,["loading"])])]))}});export{z as _};
