import{r as V,d as M,q as b,m as g,o as f,u as e,e as n,a as i,b as o,f as p,t as c,i as w,c as T,F,x as re,h as oe,s as se,B as te,w as de,v as ce,l as _e,k as ae,n as ue}from"./vue-BsfewpWM.js";import{_ as L}from"./FormFieldset-DUBDY7k3.js";import{_ as m}from"./FormGroupField-K9S4Sadl.js";import{_ as $}from"./FormGroupCheckbox-ZsJmXmB6.js";import{d as me,N,O as E,P,Q as H,M as I,L as B,s as q,g as W,u as ne,G as pe,f as be,R as fe}from"./layout-CUzOT8aY.js";import{_ as j}from"./FormGroupSelect-Cp69W3Gu.js";import{_ as R,a as ge}from"./Tabs-DMTPhsiO.js";import{_ as he}from"./RadioWithCustomNumber-B3JRVqX_.js";import{u as O}from"./useFormTabClass-DgI07GN4.js";import{u as ve,n as G,r as Q,a as ye}from"./regle-hGsoY2W9.js";import{_ as C}from"./FormGroupMultiCheck-z3kTFzdV.js";import{_ as X}from"./FormMarkup-DqBjuQjX.js";import{_ as ie}from"./Loading-CQdAiB8R.js";import{g as ke}from"./useStationQuery-ClAZEJp_.js";import{_ as we}from"./BitrateOptions-CGWdTyiI.js";import{m as $e}from"./mergeExisting-B6FvxI3v.js";import{u as xe}from"./acl-BtcXS2wX.js";const D=me("form-admin-stations",()=>{const y=V({name:"",description:"",genre:"",url:"",timezone:"UTC",enable_public_page:!0,enable_on_demand:!1,enable_on_demand_download:!0,short_name:"",api_history_items:5,frontend_type:B.Icecast,frontend_config:{sc_license_id:"",sc_user_id:"",source_pw:"",admin_pw:"",relay_pw:"",streamer_pw:"",port:null,max_listeners:null,custom_config:"",banned_ips:"",banned_countries:[],allowed_ips:"",banned_user_agents:""},backend_type:I.Liquidsoap,backend_config:{crossfade_type:H.Normal,crossfade:2,write_playlists_to_liquidsoap:!0,audio_processing_method:P.None,post_processing_include_live:!0,master_me_preset:E.MusicGeneral,master_me_loudness_target:-16,stereo_tool_license_key:"",enable_auto_cue:!1,enable_replaygain_metadata:!1,telnet_port:null,autodj_queue_length:3,use_manual_autodj:!1,charset:"UTF-8",performance_mode:"disabled",duplicate_prevention_time_range:120,hls_enable_on_public_player:!1,hls_is_default:!1,hls_segment_length:4,hls_segments_in_playlist:5,hls_segments_overhead:2,record_streams:!1,record_streams_format:N.Mp3,record_streams_bitrate:128,dj_buffer:5,live_broadcast_text:"Live Broadcast",dj_port:null,dj_mount_point:"/"},enable_hls:!1,enable_requests:!1,request_delay:5,request_threshold:15,enable_streamers:!1,disconnect_deactivate_streamer:0,media_storage_location:"",recordings_storage_location:"",podcasts_storage_location:"",is_enabled:!0,max_bitrate:0,max_mounts:0,max_hls_streams:0,radio_base_dir:""}),{r$:l}=ve(y,{name:{required:Q},url:{url:ye},frontend_type:{required:Q},backend_type:{required:Q},request_delay:{numeric:G},request_threshold:{numeric:G},backend_config:{dj_buffer:{numeric:G},live_broadcast_text:{},dj_port:{numeric:G}}},{validationGroups:t=>({profileTab:[t.name,t.description,t.genre,t.url,t.timezone,t.enable_public_page,t.enable_on_demand,t.enable_on_demand_download,t.short_name,t.api_history_items],frontendTab:[t.frontend_type,t.frontend_config.sc_license_id,t.frontend_config.sc_user_id,t.frontend_config.source_pw,t.frontend_config.admin_pw,t.frontend_config.port,t.frontend_config.max_listeners,t.frontend_config.custom_config,t.frontend_config.banned_ips,t.frontend_config.banned_countries,t.frontend_config.allowed_ips,t.frontend_config.banned_user_agents],backendTab:[t.backend_type,t.backend_config.crossfade_type,t.backend_config.crossfade,t.backend_config.write_playlists_to_liquidsoap,t.backend_config.audio_processing_method,t.backend_config.post_processing_include_live,t.backend_config.master_me_preset,t.backend_config.master_me_loudness_target,t.backend_config.stereo_tool_license_key,t.backend_config.enable_auto_cue,t.backend_config.enable_replaygain_metadata,t.backend_config.telnet_port,t.backend_config.autodj_queue_length,t.backend_config.use_manual_autodj,t.backend_config.charset,t.backend_config.performance_mode,t.backend_config.duplicate_prevention_time_range],hlsTab:[t.enable_hls,t.backend_config.hls_enable_on_public_player,t.backend_config.hls_is_default,t.backend_config.hls_segment_length,t.backend_config.hls_segments_in_playlist,t.backend_config.hls_segments_overhead],requestsTab:[t.enable_requests,t.request_delay,t.request_threshold],streamersTab:[t.enable_streamers,t.disconnect_deactivate_streamer,t.backend_config.record_streams,t.backend_config.record_streams_format,t.backend_config.record_streams_bitrate,t.backend_config.dj_buffer,t.backend_config.live_broadcast_text,t.backend_config.dj_port,t.backend_config.dj_mount_point],adminTab:[t.media_storage_location,t.recordings_storage_location,t.podcasts_storage_location,t.is_enabled,t.max_bitrate,t.max_mounts,t.max_hls_streams,t.radio_base_dir]})});return{form:y,r$:l,$reset:()=>{l.$reset({toOriginalState:!0})}}}),Se={class:"row g-3 mb-3"},Te={class:"col-md-6"},Le={class:"row g-3"},Ae={class:"row g-3"},Me={class:"row g-3"},Pe=M({__name:"ProfileForm",props:{timezones:{}},setup(y){const{r$:l,form:s}=q(D()),t=O(b(()=>l.value.$groups.profileTab)),{$gettext:_}=W(),r=b(()=>[{text:_("Disabled"),value:0},{text:"1",value:1},{text:"5",value:5},{text:"10",value:10},{text:"15",value:15}]);return(u,d)=>(f(),g(R,{label:e(_)("Profile"),"item-header-class":e(t)},{default:n(()=>[i("div",Se,[o(m,{id:"edit_form_name",class:"col-md-12",field:e(l).name,label:e(_)("Name")},null,8,["field","label"]),o(m,{id:"edit_form_description",class:"col-md-12",field:e(l).description,"input-type":"textarea",label:e(_)("Description")},null,8,["field","label"]),o(m,{id:"edit_form_genre",class:"col-md-6",field:e(l).genre,label:e(_)("Genre")},{description:n(()=>[p(c(e(_)('The primary genre this station plays, such as "rock", "electronic", or "talk".')),1)]),_:1},8,["field","label"]),o(m,{id:"edit_form_url",class:"col-md-6",field:e(l).url,"input-type":"url",label:e(_)("Web Site URL"),description:e(_)("Note: This should be the public-facing homepage of the radio station, not the AzuraCast URL. It will be included in broadcast details.")},null,8,["field","label","description"]),i("div",Te,[i("div",Le,[o(j,{id:"edit_form_timezone",class:"col-md-12",field:e(l).timezone,options:u.timezones,label:e(_)("Time Zone"),description:e(_)("Scheduled playlists and other timed items will be controlled by this time zone.")},null,8,["field","options","label","description"]),o(m,{id:"edit_form_short_name",class:"col-md-12",field:e(l).short_name,advanced:"",label:e(_)("URL Stub")},{description:n(()=>[p(c(e(_)(`Optionally specify a short URL-friendly name, such as "my_station_name", that will be used in this station's URLs. Leave this field blank to automatically create one based on the station name.`)),1)]),_:1},8,["field","label"])])]),o(m,{id:"edit_form_api_history_items",class:"col-md-6",field:e(l).api_history_items,advanced:"",label:e(_)("Number of Visible Recent Songs")},{description:n(()=>[p(c(e(_)('Customize the number of songs that will appear in the "Song History" section for this station and in all public APIs.')),1)]),default:n(({id:x,model:k})=>[o(he,{id:x,modelValue:k.$model,"onUpdate:modelValue":a=>k.$model=a,options:r.value},null,8,["id","modelValue","onUpdate:modelValue","options"])]),_:1},8,["field","label"])]),o(L,null,{label:n(()=>[p(c(e(_)("Public Pages")),1)]),default:n(()=>[i("div",Ae,[o($,{id:"edit_form_enable_public_page",class:"col-md-12",field:e(l).enable_public_page,label:e(_)("Enable Public Pages"),description:e(_)("Show the station in public pages and general API results.")},null,8,["field","label","description"])])]),_:1}),o(L,null,{label:n(()=>[p(c(e(_)("On-Demand Streaming")),1)]),default:n(()=>[i("div",Me,[o($,{id:"edit_form_enable_on_demand",class:"col-md-12",field:e(l).enable_on_demand,label:e(_)("Enable On-Demand Streaming"),description:e(_)("If enabled, music from playlists with on-demand streaming enabled will be available to stream via a specialized public page.")},null,8,["field","label","description"]),e(s).enable_on_demand?(f(),g($,{key:0,id:"edit_form_enable_on_demand_download",class:"col-md-12",field:e(l).enable_on_demand_download,label:e(_)("Enable Downloads on On-Demand Page")},{description:n(()=>[p(c(e(_)('If enabled, a download button will also be present on the public "On-Demand" page.')),1)]),_:1},8,["field","label"])):w("",!0)])]),_:1})]),_:1},8,["label","item-header-class"]))}}),Ce={class:"row g-3 mb-3"},qe={key:0,class:"row g-3 mb-3"},De={class:"row g-3 mb-3"},Ue={class:"badge small text-bg-primary ms-2"},Be={class:"row g-3 mb-3"},Ie={class:"row g-3 mb-3"},Re={class:"col-md-5"},Oe={class:"col-md-7"},Ee={class:"block-buttons"},ze={class:"badge small text-bg-primary ms-2"},Ne={class:"row g-3"},Fe=M({__name:"FrontendForm",props:{isRsasInstalled:{type:Boolean},isShoutcastInstalled:{type:Boolean},countries:{}},setup(y){const l=y,{r$:s,form:t}=q(D()),_=O(b(()=>s.value.$groups.frontendTab)),{$gettext:r}=W(),u=b(()=>{const a=[{text:r("Use Icecast 2.4 on this server."),value:B.Icecast}];return l.isRsasInstalled&&a.push({text:r("Use Rocket Streaming Audio Server (RSAS) on this server."),value:B.Rsas}),l.isShoutcastInstalled&&a.push({text:r("Use Shoutcast DNAS 2 on this server."),value:B.Shoutcast}),a.push({text:r("Do not use a local broadcasting service."),value:B.Remote}),a}),d=b(()=>t.value.frontend_type!==B.Remote),x=b(()=>t.value.frontend_type===B.Shoutcast),k=()=>{t.value.frontend_config.banned_countries=[]};return(a,S)=>(f(),g(R,{label:e(r)("Broadcasting"),"item-header-class":e(_)},{default:n(()=>[i("div",Ce,[o(C,{id:"edit_form_frontend_type",class:"col-md-12",field:e(s).frontend_type,options:u.value,stacked:"",radio:"",label:e(r)("Local Broadcasting Service"),description:e(r)("This software is traditionally used to deliver your broadcast to your listeners. You can still broadcast remotely or via HLS if this service is disabled.")},null,8,["field","options","label","description"])]),d.value?(f(),T(F,{key:0},[x.value?(f(),T("div",qe,[o(m,{id:"edit_form_frontend_sc_license_id",class:"col-md-6",field:e(s).frontend_config.sc_license_id,label:e(r)("Shoutcast License ID")},null,8,["field","label"]),o(m,{id:"edit_form_frontend_sc_user_id",class:"col-md-6",field:e(s).frontend_config.sc_user_id,label:e(r)("Shoutcast User ID")},null,8,["field","label"])])):w("",!0),i("div",De,[o(m,{id:"edit_form_frontend_source_pw",class:"col-md-6",field:e(s).frontend_config.source_pw,label:e(r)("Customize Source Password"),description:e(r)("Leave blank to automatically generate a new password.")},null,8,["field","label","description"]),o(m,{id:"edit_form_frontend_admin_pw",class:"col-md-6",field:e(s).frontend_config.admin_pw,label:e(r)("Customize Administrator Password"),description:e(r)("Leave blank to automatically generate a new password.")},null,8,["field","label","description"])]),o(L,null,{label:n(()=>[p(c(e(r)("Advanced Configuration"))+" ",1),i("span",Ue,c(e(r)("Advanced")),1)]),default:n(()=>[i("div",Be,[o(m,{id:"edit_form_frontend_port",class:"col-md-6",field:e(s).frontend_config.port,"input-type":"number","input-attrs":{min:"0"},label:e(r)("Customize Broadcasting Port"),description:e(r)("No other program can be using this port. Leave blank to automatically assign a port.")},null,8,["field","label","description"]),o(m,{id:"edit_form_max_listeners",class:"col-md-6",field:e(s).frontend_config.max_listeners,label:e(r)("Maximum Listeners"),description:e(r)("Maximum number of total listeners across all streams. Leave blank to use the default.")},null,8,["field","label","description"])]),i("div",Ie,[i("div",Re,[o(m,{id:"edit_form_frontend_banned_ips",field:e(s).frontend_config.banned_ips,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(r)("Banned IP Addresses"),description:e(r)("List one IP address or group (in CIDR format) per line.")},null,8,["field","label","description"]),o(m,{id:"edit_form_frontend_allowed_ips",field:e(s).frontend_config.allowed_ips,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(r)("Allowed IP Addresses"),description:e(r)("List one IP address or group (in CIDR format) per line.")},null,8,["field","label","description"]),o(m,{id:"edit_form_frontend_banned_user_agents",field:e(s).frontend_config.banned_user_agents,"input-type":"textarea","input-attrs":{class:"text-preformatted"},label:e(r)("Banned User Agents"),description:e(r)("List one user agent per line. Wildcards (*) are allowed.")},null,8,["field","label","description"])]),i("div",Oe,[o(j,{id:"edit_form_frontend_banned_countries",field:e(s).frontend_config.banned_countries,options:a.countries,multiple:"",label:e(r)("Banned Countries"),description:e(r)("Select the countries that are not allowed to connect to the streams.")},null,8,["field","options","label","description"]),i("div",Ee,[i("button",{type:"button",class:"btn btn-block btn-primary",onClick:k},c(e(r)("Clear List")),1)])])])]),_:1}),o(L,null,{label:n(()=>[p(c(e(r)("Custom Configuration"))+" ",1),i("span",ze,c(e(r)("Advanced")),1)]),description:n(()=>[p(c(e(r)("This code will be included in the frontend configuration. Allowed formats are:"))+" ",1),S[0]||(S[0]=i("ul",null,[i("li",null,[p("JSON: "),i("code",null,'{"new_key": "new_value"}')]),i("li",null,[p("XML: "),i("code",null,"<new_key>new_value</new_key>")])],-1))]),default:n(()=>[i("div",Ne,[o(m,{id:"edit_form_frontend_custom_config",class:"col-md-12",field:e(s).frontend_config.custom_config,"input-type":"textarea","input-attrs":{class:"text-preformatted",spellcheck:"false","max-rows":25,rows:5},label:e(r)("Custom Configuration")},null,8,["field","label"])])]),_:1})],64)):w("",!0)]),_:1},8,["label","item-header-class"]))}}),je={class:"row g-3 mb-3"},Je={key:0,class:"row g-3 mb-3"},Ge={href:"/docs/help/optimizing/#disable-audio-post-processing",target:"_blank"},He={class:"row g-3 mb-3"},Ve={href:"https://github.com/Moonbase59/autocue/",target:"_blank"},We={class:"row g-3 mb-3"},Ye={class:"card-text"},Ke={class:"card-text"},Qe={href:"https://github.com/trummerschlunk/master_me",target:"_blank"},Xe={class:"row g-3"},Ze={class:"card-text"},et={href:"https://www.thimeo.com/stereo-tool/",target:"_blank"},tt={class:"row mb-3 g-3"},at={class:"card-text"},ot={class:"badge small text-bg-primary ms-2"},st={class:"row g-3"},nt=M({__name:"BackendForm",props:{isStereoToolInstalled:{type:Boolean}},setup(y){const l=y,{r$:s,form:t}=q(D()),_=O(b(()=>s.value.$groups.backendTab)),r=b(()=>t.value?.backend_type!==I.None),u=b(()=>t.value?.backend_config?.audio_processing_method===P.StereoTool),d=b(()=>t.value?.backend_config?.audio_processing_method===P.MasterMe),x=b(()=>t.value?.backend_config?.audio_processing_method!==P.None),k=b(()=>t.value?.backend_config?.enable_auto_cue??!1),{$gettext:a}=W(),S=b(()=>[{text:a("Use Liquidsoap on this server."),value:I.Liquidsoap},{text:a("Do not use an AutoDJ service."),value:I.None}]),v=b(()=>[{text:a("Smart Mode"),value:H.Smart},{text:a("Normal Mode"),value:H.Normal},{text:a("Disable Crossfading"),value:H.Disabled}]),A=b(()=>{const U=[{text:a("No Post-processing"),value:P.None},{text:a("Basic Normalization and Compression"),value:P.Liquidsoap},{text:a("Master_me Post-processing"),value:P.MasterMe}];return l.isStereoToolInstalled&&U.push({text:a("Stereo Tool"),value:P.StereoTool}),U}),Y=b(()=>[{text:"UTF-8",value:"UTF-8"},{text:"ISO-8859-1",value:"ISO-8859-1"}]),J=b(()=>[{text:a("Music General"),value:E.MusicGeneral},{text:a("Speech General"),value:E.SpeechGeneral},{text:a("EBU R128"),value:E.EbuR128},{text:a("Apple Podcasts"),value:E.ApplePodcasts},{text:a("YouTube"),value:E.YouTube}]),K=b(()=>[{text:a("Use Less Memory (Uses More CPU)"),value:"less_memory"},{text:a("Balanced"),value:"balanced"},{text:a("Use Less CPU (Uses More Memory)"),value:"less_cpu"},{text:a("Disable Optimizations"),value:"disabled"}]);return(U,z)=>(f(),g(R,{label:e(a)("AutoDJ"),"item-header-class":e(_)},{default:n(()=>[i("div",je,[o(C,{id:"edit_form_backend_type",class:"col-md-12",field:e(s).backend_type,options:S.value,stacked:"",radio:"",label:e(a)("AutoDJ Service"),description:e(a)("This software shuffles from playlists of music constantly and plays when no other radio source is available.")},null,8,["field","options","label","description"])]),r.value?(f(),T(F,{key:0},[k.value?w("",!0):(f(),T("div",Je,[o(C,{id:"edit_form_backend_crossfade_type",class:"col-md-7",field:e(s).backend_config.crossfade_type,options:v.value,stacked:"",radio:"",label:e(a)("Crossfade Method"),description:e(a)("Choose a method to use when transitioning from one song to another. Smart Mode considers the volume of the two tracks when fading for a smoother effect, but requires more CPU resources.")},null,8,["field","options","label","description"]),o(m,{id:"edit_form_backend_crossfade",class:"col-md-5",field:e(s).backend_config.crossfade,"input-type":"number","input-attrs":{min:"0.0",max:"30.0",step:"0.1"},label:e(a)("Crossfade Duration (Seconds)"),description:e(a)("Number of seconds to overlap songs.")},null,8,["field","label","description"])])),o(L,null,{label:n(()=>[p(c(e(a)("Audio Processing")),1)]),description:n(()=>[p(c(e(a)("Apply audio processors (like compressors, limiters, or equalizers) to your stream to create a more uniform sound or enhance the listening experience. Processing requires extra CPU resources, so it may slow down your server."))+" ",1),i("a",Ge,c(e(a)("Learn More about Post-processing CPU Impact")),1)]),default:n(()=>[i("div",He,[o($,{id:"edit_form_backend_config_enable_auto_cue",class:"col-md-12",field:e(s).backend_config.enable_auto_cue,label:e(a)("Enable AutoCue (Beta)"),"high-cpu":""},{description:n(()=>[p(c(e(a)("AutoCue analyzes your music and automatically calculates cue points, fade points, and volume levels for a consistent listening experience."))+" ",1),z[0]||(z[0]=i("br",null,null,-1)),i("a",Ve,c(e(a)("Learn more about AutoCue")),1)]),_:1},8,["field","label"]),k.value?w("",!0):(f(),g($,{key:0,id:"edit_form_backend_enable_replaygain_metadata",class:"col-md-12",field:e(s).backend_config.enable_replaygain_metadata,label:e(a)("Enable ReplayGain"),"high-cpu":""},{description:n(()=>[p(c(e(a)("Calculate and use normalized volume level metadata for each track.")),1)]),_:1},8,["field","label"]))]),i("div",We,[o(C,{id:"edit_form_backend_config_audio_processing_method",class:"col-md-6",field:e(s).backend_config.audio_processing_method,options:A.value,stacked:"",radio:"",label:e(a)("Audio Post-processing Method"),description:e(a)("Select an option here to apply post-processing using an easy preset or tool. You can also manually apply post-processing by editing your Liquidsoap configuration manually."),"high-cpu":""},null,8,["field","options","label","description"]),x.value?(f(),g($,{key:0,id:"edit_form_backend_config_post_processing_include_live",class:"col-md-6",field:e(s).backend_config.post_processing_include_live,label:e(a)("Apply Post-processing to Live Streams"),description:e(a)("Check this box to apply post-processing to all audio, including live streams. Uncheck this box to only apply post-processing to the AutoDJ.")},null,8,["field","label","description"])):w("",!0)]),d.value?(f(),T(F,{key:0},[o(X,{id:"master_me_info"},{label:n(()=>[p(c(e(a)("About Master_me")),1)]),default:n(()=>[i("p",Ye,c(e(a)("Master_me is an open-source automatic mastering plugin for streaming, podcasts and Internet radio.")),1),i("p",Ke,[i("a",Qe,c(e(a)("Master_me Project Homepage")),1)])]),_:1}),i("div",Xe,[o(C,{id:"edit_form_backend_master_me_preset",class:"col-md-6",field:e(s).backend_config.master_me_preset,options:J.value,stacked:"",radio:"",label:e(a)("Master_me Preset")},null,8,["field","options","label"]),o(m,{id:"edit_form_backend_master_me_loudness_target",class:"col-md-6",field:e(s).backend_config.master_me_loudness_target,"input-type":"number","input-attrs":{min:"-50",max:"0",step:"1"},label:e(a)("Master_me Loudness Target (LUFS)"),description:e(a)("The average target loudness (measured in LUFS) for the broadcasted stream. Values between -14 and -18 LUFS are common for Internet radio stations."),clearable:""},null,8,["field","label","description"])])],64)):w("",!0),u.value&&U.isStereoToolInstalled?(f(),T(F,{key:1},[o(X,{id:"stereo_tool_info"},{label:n(()=>[p(c(e(a)("Stereo Tool")),1)]),default:n(()=>[i("p",Ze,[p(c(e(a)("Stereo Tool is an industry standard for software audio processing. For more information on how to configure it, please refer to the"))+" ",1),i("a",et,c(e(a)("Stereo Tool documentation.")),1)])]),_:1}),i("div",tt,[o(m,{id:"edit_form_backend_stereo_tool_license_key",class:"col-md-7",field:e(s).backend_config.stereo_tool_license_key,"input-type":"text",label:e(a)("Stereo Tool License Key"),description:e(a)("Provide a valid license key from Thimeo. Functionality is limited without a license key.")},null,8,["field","label","description"]),o(X,{id:"edit_form_backend_stereo_tool_config",class:"col-md-5"},{label:n(()=>[p(c(e(a)("Upload Stereo Tool Configuration")),1)]),default:n(()=>[i("p",at,c(e(a)('Upload a Stereo Tool configuration file from the "Broadcasting" submenu in the station profile.')),1)]),_:1})])],64)):w("",!0)]),_:1}),o(L,null,{label:n(()=>[p(c(e(a)("Advanced Configuration"))+" ",1),i("span",ot,c(e(a)("Advanced")),1)]),default:n(()=>[i("div",st,[o($,{id:"edit_form_backend_use_manual_autodj",class:"col-md-12",field:e(s).backend_config.use_manual_autodj,label:e(a)("Manual AutoDJ Mode")},{description:n(()=>[p(c(e(a)(`This mode disables AzuraCast's AutoDJ management, using Liquidsoap itself to manage song playback. "next song" and some other features will not be available.`)),1)]),_:1},8,["field","label"]),o($,{id:"edit_form_backend_config_write_playlists_to_liquidsoap",class:"col-md-12",field:e(s).backend_config.write_playlists_to_liquidsoap,label:e(a)("Always Write Playlists to Liquidsoap"),description:e(a)("By default, all playlists are written to Liquidsoap as a backup in case the normal AutoDJ fails. This can affect CPU load, especially on startup. Disable to only write essential playlists to Liquidsoap.")},null,8,["field","label","description"]),o(m,{id:"edit_form_backend_telnet_port",class:"col-md-6",field:e(s).backend_config.telnet_port,"input-type":"number","input-attrs":{min:"0"},label:e(a)("Customize Internal Request Processing Port"),description:e(a)("This port is not used by any external process. Only modify this port if the assigned port is in use. Leave blank to automatically assign a port.")},null,8,["field","label","description"]),o(m,{id:"edit_form_backend_autodj_queue_length",class:"col-md-6",field:e(s).backend_config.autodj_queue_length,"input-type":"number","input-attrs":{min:"2",max:"25"},label:e(a)("AutoDJ Queue Length"),description:e(a)("This determines how many songs in advance the AutoDJ will automatically fill the queue.")},null,8,["field","label","description"]),o(C,{id:"edit_form_backend_charset",class:"col-md-6",field:e(s).backend_config.charset,options:Y.value,stacked:"",radio:"",label:e(a)("Character Set Encoding"),description:e(a)("For most cases, use the default UTF-8 encoding. The older ISO-8859-1 encoding can be used if accepting connections from Shoutcast 1 DJs or using other legacy software.")},null,8,["field","options","label","description"]),o(C,{id:"edit_form_backend_performance_mode",class:"col-md-6",field:e(s).backend_config.performance_mode,options:K.value,stacked:"",radio:"",label:e(a)("Liquidsoap Performance Tuning"),description:e(a)("If your installation is constrained by CPU or memory, you can change this setting to tune the resources used by Liquidsoap.")},null,8,["field","options","label","description"]),o(m,{id:"edit_form_backend_duplicate_prevention_time_range",class:"col-md-6",field:e(s).backend_config.duplicate_prevention_time_range,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:e(a)("Duplicate Prevention Time Range (Minutes)"),description:e(a)("This specifies the time range (in minutes) of the song history that the duplicate song prevention algorithm should take into account.")},null,8,["field","label","description"])])]),_:1})],64)):w("",!0)]),_:1},8,["label","item-header-class"]))}}),it={class:"row g-3 mb-3"},lt={class:"row g-3 mb-3"},rt={class:"row g-3"},dt=M({__name:"AdminForm",props:{isEditMode:{type:Boolean}},setup(y){const l=y,s=ke("/admin/stations/storage-locations"),{r$:t}=q(D()),_=O(b(()=>t.value.$groups.adminTab)),r=V(!0),u=re({media_storage_location:[],recordings_storage_location:[],podcasts_storage_location:[]}),{$gettext:d}=W(),x=d("Create a new storage location based on the base directory."),k=v=>{if(l.isEditMode)return v;const A=v.slice();return A.push({value:"",text:x}),A},{axios:a}=ne();return oe(async()=>{try{const{data:v}=await a.get(s.value);u.media_storage_location=k(v.media_storage_location),u.recordings_storage_location=k(v.recordings_storage_location),u.podcasts_storage_location=k(v.podcasts_storage_location)}finally{r.value=!1}}),(v,A)=>(f(),g(R,{label:e(d)("Administration"),"item-header-class":e(_)},{default:n(()=>[i("div",it,[o($,{id:"edit_form_is_enabled",class:"col-md-6",field:e(t).is_enabled,label:e(d)("Enable Broadcasting"),description:e(d)("If disabled, the station will not broadcast or shuffle its AutoDJ.")},null,8,["field","label","description"]),o(m,{id:"edit_form_radio_base_dir",class:"col-md-6",field:e(t).radio_base_dir,advanced:"",label:e(d)("Base Station Directory"),description:e(d)("The parent directory where station playlist and configuration files are stored. Leave blank to use default directory.")},null,8,["field","label","description"])]),i("div",lt,[o(m,{id:"edit_form_max_bitrate",class:"col-md-4",field:e(t).max_bitrate,label:e(d)("Maximum Bitrate"),description:e(d)("The maximum bitrate in which the station allowed to broadcast at, in Kbps. 0 for unlimited."),"input-number":""},null,8,["field","label","description"]),o(m,{id:"edit_form_max_mounts",class:"col-md-4",field:e(t).max_mounts,label:e(d)("Maximum Mounts"),description:e(d)("The maximum number of mount points allowed. 0 for unlimited."),"input-number":""},null,8,["field","label","description"]),o(m,{id:"edit_form_max_hls_streams",class:"col-md-4",field:e(t).max_hls_streams,label:e(d)("Maximum HLS Streams"),description:e(d)("The maximum number of HLS streams allowed. 0 for unlimited."),"input-number":""},null,8,["field","label","description"])]),o(ie,{loading:r.value},{default:n(()=>[i("div",rt,[o(j,{id:"edit_form_media_storage_location",class:"col-md-12",field:e(t).media_storage_location,options:u.media_storage_location,label:e(d)("Media Storage Location")},null,8,["field","options","label"]),o(j,{id:"edit_form_recordings_storage_location",class:"col-md-12",field:e(t).recordings_storage_location,options:u.recordings_storage_location,label:e(d)("Live Recordings Storage Location")},null,8,["field","options","label"]),o(j,{id:"edit_form_podcasts_storage_location",class:"col-md-12",field:e(t).podcasts_storage_location,options:u.podcasts_storage_location,label:e(d)("Podcasts Storage Location")},null,8,["field","options","label"])])]),_:1},8,["loading"])]),_:1},8,["label","item-header-class"]))}}),ct={class:"card-text"},Z=M({__name:"BackendDisabled",setup(y){return(l,s)=>(f(),g(L,null,{label:n(()=>[p(c(l.$gettext("No AutoDJ Enabled")),1)]),default:n(()=>[i("p",ct,c(l.$gettext("This feature requires the AutoDJ feature to be enabled.")),1)]),_:1}))}}),_t={class:"row g-3 mb-3"},ut={key:0,class:"row g-3 mb-3"},mt={key:1,class:"row g-3 mb-3"},pt=M({__name:"HlsForm",setup(y){const{r$:l,form:s}=q(D()),t=O(b(()=>l.value.$groups.hlsTab)),_=b(()=>s.value.backend_type!==I.None),r=b(()=>t.value?t.value:_.value?"":"text-muted");return(u,d)=>(f(),g(R,{label:u.$gettext("HLS"),"item-header-class":r.value},{default:n(()=>[_.value?(f(),g(L,{key:0},{label:n(()=>[p(c(u.$gettext("HTTP Live Streaming (HLS)")),1)]),description:n(()=>[p(c(u.$gettext("HTTP Live Streaming (HLS) is a new adaptive-bitrate technology supported by some clients. It does not use the standard broadcasting frontends.")),1)]),default:n(()=>[i("div",_t,[o($,{id:"edit_form_enable_hls",class:"col-md-12",field:e(l).enable_hls,label:u.$gettext("Enable HTTP Live Streaming (HLS)")},null,8,["field","label"])]),e(s).enable_hls?(f(),T("div",ut,[o($,{id:"edit_form_backend_hls_enable_on_public_player",class:"col-md-12",field:e(l).backend_config.hls_enable_on_public_player,label:u.$gettext("Show HLS Stream on Public Player")},null,8,["field","label"]),o($,{id:"edit_form_backend_hls_is_default",class:"col-md-12",field:e(l).backend_config.hls_is_default,label:u.$gettext("Make HLS Stream Default in Public Player")},null,8,["field","label"])])):w("",!0),e(s).enable_hls?(f(),T("div",mt,[o(m,{id:"edit_form_backend_hls_segment_length",class:"col-md-4",field:e(l).backend_config.hls_segment_length,"input-type":"number","input-attrs":{min:"0",max:"9999"},advanced:"",label:u.$gettext("Segment Length (Seconds)")},null,8,["field","label"]),o(m,{id:"edit_form_backend_hls_segments_in_playlist",class:"col-md-4",field:e(l).backend_config.hls_segments_in_playlist,"input-type":"number","input-attrs":{min:"0",max:"60"},advanced:"",label:u.$gettext("Segments in Playlist")},null,8,["field","label"]),o(m,{id:"edit_form_backend_hls_segments_overhead",class:"col-md-4",field:e(l).backend_config.hls_segments_overhead,"input-type":"number","input-attrs":{min:"0",max:"60"},advanced:"",label:u.$gettext("Segments Overhead")},null,8,["field","label"])])):w("",!0)]),_:1})):(f(),g(Z,{key:1}))]),_:1},8,["label","item-header-class"]))}}),bt={class:"row g-3 mb-3"},ft={key:0,class:"row g-3 mb-3"},gt=M({__name:"RequestsForm",setup(y){const{r$:l,form:s}=q(D()),t=O(b(()=>l.value.$groups.requestsTab)),_=b(()=>s.value.backend_type!==I.None),r=b(()=>t.value?t.value:_.value?"":"text-muted");return(u,d)=>(f(),g(R,{label:u.$gettext("Song Requests"),"item-header-class":r.value},{default:n(()=>[_.value?(f(),g(L,{key:0},{label:n(()=>[p(c(u.$gettext("Song Requests")),1)]),description:n(()=>[p(c(u.$gettext("Some stream licensing providers may have specific rules regarding song requests. Check your local regulations for more information.")),1)]),default:n(()=>[i("div",bt,[o($,{id:"edit_form_enable_requests",class:"col-md-12",field:e(l).enable_requests,label:u.$gettext("Allow Song Requests"),description:u.$gettext("Enable listeners to request a song for play on your station. Only songs that are already in your playlists are requestable.")},null,8,["field","label","description"])]),e(s).enable_requests?(f(),T("div",ft,[o(m,{id:"edit_form_request_delay",class:"col-md-6",field:e(l).request_delay,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:u.$gettext("Request Minimum Delay (Minutes)"),description:u.$gettext("If requests are enabled, this specifies the minimum delay (in minutes) between a request being submitted and being played. If set to zero, a minor delay of 15 seconds is applied to prevent request floods.")},null,8,["field","label","description"]),o(m,{id:"edit_form_request_threshold",class:"col-md-6",field:e(l).request_threshold,"input-type":"number","input-attrs":{min:"0",max:"1440"},label:u.$gettext("Request Last Played Threshold (Minutes)"),description:u.$gettext("This specifies the minimum time (in minutes) between a song playing on the radio and being available to request again. Set to 0 for no threshold.")},null,8,["field","label","description"])])):w("",!0)]),_:1})):(f(),g(Z,{key:1}))]),_:1},8,["label","item-header-class"]))}}),ht={class:"row g-3 mb-3"},vt={class:"row g-3 mb-3"},yt={key:0,class:"row g-3 mb-3"},kt={class:"row g-3 mb-3"},wt=M({__name:"StreamersForm",setup(y){const{r$:l,form:s}=q(D()),t=O(b(()=>l.value.$groups.streamersTab)),_=b(()=>s.value.backend_type!==I.None),r=b(()=>t.value?t.value:_.value?"":"text-muted"),u=b(()=>[{text:"MP3",value:N.Mp3},{text:"OGG Vorbis",value:N.Ogg},{text:"OGG Opus",value:N.Opus},{text:"AAC+ (MPEG4 HE-AAC v2)",value:N.Aac}]);return(d,x)=>(f(),g(R,{label:d.$gettext("Streamers/DJs"),"item-header-class":r.value},{default:n(()=>[_.value?(f(),g(L,{key:0},{label:n(()=>[p(c(d.$gettext("Streamers/DJs")),1)]),default:n(()=>[i("div",ht,[o($,{id:"edit_form_enable_streamers",class:"col-md-12",field:e(l).enable_streamers,label:d.$gettext("Allow Streamers / DJs"),description:d.$gettext("If enabled, streamers (or DJs) will be able to connect directly to your stream and broadcast live music that interrupts the AutoDJ stream.")},null,8,["field","label","description"])]),e(s).enable_streamers?(f(),T(F,{key:0},[i("div",vt,[o($,{id:"edit_form_backend_record_streams",class:"col-md-12",field:e(l).backend_config.record_streams,label:d.$gettext("Record Live Broadcasts"),description:d.$gettext("If enabled, AzuraCast will automatically record any live broadcasts made to this station to per-broadcast recordings.")},null,8,["field","label","description"])]),e(s).backend_config.record_streams?(f(),T("div",yt,[o(C,{id:"edit_form_backend_record_streams_format",class:"col-md-6",field:e(l).backend_config.record_streams_format,options:u.value,stacked:"",radio:"",label:d.$gettext("Live Broadcast Recording Format")},null,8,["field","options","label"]),o(m,{id:"edit_form_backend_record_streams_bitrate",class:"col-md-6",field:e(l).backend_config.record_streams_bitrate,label:d.$gettext("Live Broadcast Recording Bitrate (kbps)")},{default:n(({id:k,model:a,fieldClass:S,inputAttrs:v})=>[o(we,{id:k,modelValue:a.$model,"onUpdate:modelValue":A=>a.$model=A,class:se(S),"input-attrs":v,"max-bitrate":e(s).max_bitrate},null,8,["id","modelValue","onUpdate:modelValue","class","input-attrs","max-bitrate"])]),_:1},8,["field","label"])])):w("",!0),i("div",kt,[o(m,{id:"edit_form_disconnect_deactivate_streamer",class:"col-md-6",field:e(l).disconnect_deactivate_streamer,"input-type":"number","input-attrs":{min:"0"}},{label:n(()=>[p(c(d.$gettext("Deactivate Streamer on Disconnect (Seconds)")),1)]),description:n(()=>[p(c(d.$gettext("This is the number of seconds until a streamer who has been manually disconnected can reconnect to the stream. Set to 0 to allow the streamer to immediately reconnect.")),1)]),_:1},8,["field"]),o(m,{id:"edit_form_backend_dj_port",class:"col-md-6",field:e(l).backend_config.dj_port,"input-type":"number","input-attrs":{min:"0"},advanced:"",label:d.$gettext("Customize DJ/Streamer Port")},{description:n(()=>[p(c(d.$gettext("No other program can be using this port. Leave blank to automatically assign a port."))+" ",1),x[0]||(x[0]=i("br",null,null,-1)),p(" "+c(d.$gettext("Note: the port after this one will automatically be used for legacy connections.")),1)]),_:1},8,["field","label"]),o(m,{id:"edit_form_backend_dj_buffer",class:"col-md-6",field:e(l).backend_config.dj_buffer,"input-type":"number","input-attrs":{min:"0",max:"60"},label:d.$gettext("DJ/Streamer Buffer Time (Seconds)"),description:d.$gettext("The number of seconds of signal to store in case of interruption. Set to the lowest value that your DJs can use without stream interruptions.")},null,8,["field","label","description"]),o(m,{id:"edit_form_backend_dj_mount_point",class:"col-md-6",field:e(l).backend_config.dj_mount_point,advanced:"",label:d.$gettext("Customize DJ/Streamer Mount Point"),description:d.$gettext("If your streaming software requires a specific mount point path, specify it here. Otherwise, use the default.")},null,8,["field","label","description"]),o(m,{id:"edit_form_backend_live_broadcast_text",class:"col-md-6",field:e(l).backend_config.live_broadcast_text,label:d.$gettext("Default Live Broadcast Message"),description:d.$gettext("If a live DJ connects but has not yet sent metadata, this is the message that will display on player pages.")},null,8,["field","label","description"])])],64)):w("",!0)]),_:1})):(f(),g(Z,{key:1}))]),_:1},8,["label","item-header-class"]))}}),$t={class:"buttons mt-3"},Nt=M({inheritAttrs:!1,__name:"StationForm",props:{createUrl:{},editUrl:{default:null},isEditMode:{type:Boolean},isModal:{type:Boolean,default:!1},timezones:{},countries:{},isRsasInstalled:{type:Boolean,default:!1},isShoutcastInstalled:{type:Boolean,default:!1},isStereoToolInstalled:{type:Boolean,default:!1}},emits:["submitted","loadingUpdate","validUpdate"],setup(y,{expose:l,emit:s}){const t=y,_=s,r=xe(pe.Stations),u=D(),{form:d,r$:x}=q(u),{$reset:k}=u,a=b(()=>!x.value?.$invalid);te(a,h=>{_("validUpdate",h)});const S=V(!0);te(S,h=>{_("loadingUpdate",h)});const v=V(null),A=()=>{k(),S.value=!1,v.value=null},{notifySuccess:Y}=be(),{axios:J}=ne(),K=async()=>{if(t.editUrl){S.value=!0;try{const{data:h}=await J.get(t.editUrl);d.value=$e(d.value,h)}finally{S.value=!1}}},U=async()=>{await ue(),A(),t.isEditMode&&K()};oe(()=>{t.isModal||U()});const z=async()=>{const h=t.isEditMode?t.editUrl:t.createUrl,{valid:ee}=await x.value.$validate();if(!(!ee||!h)){v.value=null;try{await J({method:t.isEditMode?"PUT":"POST",url:h,data:d.value}),Y(),_("submitted")}catch(le){v.value=fe(le)}}};return l({reset:U,submit:z}),(h,ee)=>(f(),g(ie,{loading:S.value},{default:n(()=>[de(i("div",{class:"alert alert-danger"},c(v.value),513),[[ce,v.value!=null]]),i("form",{class:"form vue-form",onSubmit:_e(z,["prevent"])},[o(ge,{"content-class":"mt-3"},{default:n(()=>[o(Pe,{timezones:h.timezones},null,8,["timezones"]),o(Fe,{"is-rsas-installed":h.isRsasInstalled,"is-shoutcast-installed":h.isShoutcastInstalled,countries:h.countries},null,8,["is-rsas-installed","is-shoutcast-installed","countries"]),o(nt,{"is-stereo-tool-installed":h.isStereoToolInstalled},null,8,["is-stereo-tool-installed"]),o(pt),o(gt),o(wt),e(r)?(f(),g(dt,{key:0,"is-edit-mode":h.isEditMode},null,8,["is-edit-mode"])):w("",!0)]),_:1}),ae(h.$slots,"submitButton",{},()=>[i("div",$t,[i("button",{type:"submit",class:se(["btn btn-lg",a.value?"btn-primary":"btn-danger"])},[ae(h.$slots,"submitButtonText",{},()=>[p(c(h.$gettext("Save Changes")),1)])],2)])])],32)]),_:3},8,["loading"]))}});export{Nt as _};
