import{d as U,r as w,h as B,c as S,o as A,l as P,a as e,w as j,b as a,t as m,u as t,v as E,e as f}from"./vue-BsfewpWM.js";import{_ as x}from"./CodemirrorTextarea-gPAxNt7r.js";import{_ as u}from"./FormGroupField-K9S4Sadl.js";import{g as T,u as D,f as L}from"./layout-CUzOT8aY.js";import{m as R}from"./mergeExisting-B6FvxI3v.js";import{_ as F}from"./Loading-CQdAiB8R.js";import{u as N}from"./useResettableRef-BwkDrsai.js";import{u as M}from"./regle-hGsoY2W9.js";import{_ as y}from"./CustomAssetForm-GtSHfkvu.js";import{e as b}from"./useStationQuery-ClAZEJp_.js";import"./index.es-DJGkFkUi.js";import"./theme-BQjAlSn5.js";import"./FormGroup-DXDHSoyc.js";import"./ValidationError-DsAp6Fjg.js";import"./leaflet-DkUWBo0d.js";import"./estoolkit-DCzBkaPJ.js";import"./hlsjs-BVyhFw5s.js";import"./bootstrap.esm-30QIU_ZL.js";import"./zxcvbn-Bgw4VUEj.js";import"./FormFile-B5B3WV6y.js";import"./lightbox-B9nVyWr-.js";import"./vue-router-Cafqdr3I.js";const O={class:"card mb-3",role:"region"},z={class:"card-header text-bg-primary"},I={class:"card-title"},J={class:"card-body"},q={class:"row g-3"},G={class:"btn btn-primary mt-3",type:"submit"},H=U({__name:"BrandingForm",props:{profileEditUrl:{}},setup(g){const d=g,r=w(!0),n=w(null),{record:o,reset:h}=N({default_album_art_url:"",public_custom_css:"",public_custom_js:"",offline_text:""}),{r$:l}=M(o,{default_album_art_url:{},public_custom_css:{},public_custom_js:{},offline_text:{}},{}),{$gettext:s}=T(),{axios:v}=D(),V=i=>{o.value=R(o.value,i)},$=async()=>{h(),l.$reset(),r.value=!0;const{data:i}=await v.get(d.profileEditUrl);V(i.branding_config),r.value=!1};B($);const{notifySuccess:k}=L(),C=async()=>{const{valid:i}=await l.$validate();i&&(await v({method:"PUT",url:d.profileEditUrl,data:{branding_config:o.value}}),k(),await $())};return(i,tt)=>(A(),S("form",{class:"form vue-form",onSubmit:P(C,["prevent"])},[e("section",O,[e("div",z,[e("h2",I,m(t(s)("Branding Settings")),1)]),j(e("div",{class:"alert alert-danger"},m(n.value),513),[[E,n.value!=null]]),a(F,{loading:r.value},{default:f(()=>[e("div",J,[e("div",q,[a(u,{id:"form_edit_offline_text",class:"col-md-6",field:t(l).offline_text,label:t(s)("Station Offline Display Text"),description:t(s)('This will be shown on public player pages if the station is offline. Leave blank to default to a localized version of "%{message}".',{message:t(s)("Station Offline")})},null,8,["field","label","description"]),a(u,{id:"form_edit_default_album_art_url",class:"col-md-6",field:t(l).default_album_art_url,label:t(s)("Default Album Art URL"),description:t(s)("If a song has no album art, this URL will be listed instead. Leave blank to use the standard placeholder art.")},null,8,["field","label","description"]),a(u,{id:"edit_form_public_custom_css",class:"col-md-12",field:t(l).public_custom_css,label:t(s)("Custom CSS for Public Pages"),description:t(s)("This CSS will be applied to the station public pages.")},{default:f(({id:_,model:c})=>[a(x,{id:_,modelValue:c.$model,"onUpdate:modelValue":p=>c.$model=p,mode:"css"},null,8,["id","modelValue","onUpdate:modelValue"])]),_:1},8,["field","label","description"]),a(u,{id:"edit_form_public_custom_js",class:"col-md-12",field:t(l).public_custom_js,label:t(s)("Custom JS for Public Pages"),description:t(s)("This javascript code will be applied to the station public pages.")},{default:f(({id:_,model:c})=>[a(x,{id:_,modelValue:c.$model,"onUpdate:modelValue":p=>c.$model=p,mode:"javascript"},null,8,["id","modelValue","onUpdate:modelValue"])]),_:1},8,["field","label","description"])]),e("button",G,m(t(s)("Save Changes")),1)])]),_:1},8,["loading"])])],32))}}),K={class:"row-of-cards"},Q={class:"card",role:"region","aria-labelledby":"hdr_custom_assets"},W={class:"card-header text-bg-primary"},X={id:"hdr_custom_assets",class:"card-title"},Y={class:"card-body"},Z={class:"list-unstyled"},yt=U({__name:"Branding",setup(g){const d=b("/profile/edit"),r=b("/custom_assets/background"),n=b("/custom_assets/album_art");return(o,h)=>(A(),S("div",K,[e("section",Q,[e("div",W,[e("h2",X,m(o.$gettext("Upload Custom Assets")),1)]),e("div",Y,[e("ul",Z,[a(y,{id:"asset_background",class:"mb-3","api-url":t(r),caption:o.$gettext("Public Page Background")},null,8,["api-url","caption"]),a(y,{id:"asset_album_art",class:"mb-3","api-url":t(n),caption:o.$gettext("Default Album Art")},null,8,["api-url","caption"])])])]),a(H,{"profile-edit-url":t(d)},null,8,["profile-edit-url"])]))}});export{yt as default};
