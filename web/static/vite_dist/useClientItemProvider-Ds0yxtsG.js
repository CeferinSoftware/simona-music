import{D as O}from"./DataTable-BhAO7RbG.js";import{j as I}from"./layout-CUzOT8aY.js";import{f as L}from"./map-Caxea7Kw.js";import{e as M,f as T,g}from"./iteratee-DJRL6CbS.js";import{i as y}from"./isArrayLike-DknTMkCU.js";import{e as b,a as h}from"./estoolkit-DCzBkaPJ.js";import{G as D,q as f,$ as v}from"./vue-BsfewpWM.js";function E(a,t,e){return M(e)&&(typeof t=="number"&&y(e)&&T(t)&&t<e.length||typeof t=="string"&&t in e)?b(e[t],a):!1}function S(a,t,e){if(!y(a))return[];const s=a.length;e===void 0?e=s:typeof e!="number"&&E(a,t,e)&&(t=0,e=s),t=h(t),e=h(e),t<0?t=Math.max(s+t,0):t=Math.min(t,s),e<0?e=Math.max(s+e,0):e=Math.min(e,s);const o=Math.max(e-t,0),u=new Array(o);for(let l=0;l<o;++l)u[l]=a[t+l];return u}function G(a,t,e,s){const o=D(O),u=r=>{o.value=r,typeof e=="function"&&e(r)},l=f(()=>{const r=o.value.searchPhrase.toLowerCase();return L(v(a),n=>Object.entries(n).filter(c=>{const[m,i]=c;return!i||m[0]==="_"?!1:(typeof i=="object"?JSON.stringify(Object.values(i)):typeof i=="string"?i:i.toString()).toLowerCase().includes(r)}).length>0)}),P=f(()=>l.value.length),{localeShort:w}=I(),A=f(()=>{let r=l.value;const{sortField:n,sortOrder:c}=o.value;if(n!==null){const m=new Intl.Collator(w,{numeric:!0,sensitivity:"base"});r=r.sort((i,p)=>m.compare(g(i,n,""),g(p,n,""))),c==="desc"&&(r=r.reverse())}return o.value.paginated&&o.value.perPage>0&&(r=S(r,(o.value.currentPage-1)*o.value.perPage,o.value.currentPage*o.value.perPage)),r}),C=f(()=>t!==void 0?v(t):!1);return{rows:A,total:P,loading:C,setContext:u,refresh:async(r=!1)=>{typeof s=="function"&&await s(r)}}}export{E as i,G as u};
